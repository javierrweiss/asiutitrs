/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"0D9DFE84-0012-4D0C-AECA-04DC2179E345"}
 */
var vClave_str = ' ';

/**
 * @properties={typeid:35,uuid:"B71909D1-2B13-4BC2-A588-2F1685FCC685",variableType:-4}
 */
var vBandejaCiru = false;
/**
 * @properties={typeid:35,uuid:"096CECFA-BE7E-43EC-BDD8-13372651EDE4",variableType:-4}
 */
var gbl_user = false;
/**
 * @properties={typeid:35,uuid:"350D311C-1396-4E67-B232-1819A767B8BD",variableType:-4}
 */
var gbl_expanding_Nodes = new Array;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"3741FFBD-A13B-4E4A-B8AA-FF29BADC7844",variableType:4}
 */
var vTipoArticulo = 1;

/**
 * @properties={typeid:35,uuid:"A3FD0EF8-68DF-4A75-9C83-DBC440976C83",variableType:-4}
 */
var vProtocolo = false;

/**
 * @properties={typeid:35,uuid:"7AFC4E2E-AE90-4F55-9B26-A529C71C098A",variableType:-4}
 */
var vSeleccionoRegistro = false;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"A415002D-798F-4EA7-AA4C-D93384C33CAF"}
 */
var vPacApeynom = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"E44D02A3-1B38-4C15-BB60-88B9AA0C490B"}
 */
var vSpaces = '';
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"354DE432-3284-464A-BA43-A5676E3C1E89"}
 */
var vSpaces_1 = ' ';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"7C8A76BC-DCE4-4A9A-B254-23F711E543A4",variableType:4}
 */
var vHiscli1 = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"B7E5CD62-CB26-4DBB-9DF3-4B477410A4A6",variableType:4}
 */
var vGrupo = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"57C00C81-D6B6-4F0B-ACFB-1E2D0F43A4E9",variableType:4}
 */
var vNro1 = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"30FB5760-4B04-4781-9E59-6A9F297CE554"}
 */
var vTipoTxt1 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"D4A5232C-C940-40E0-A3F6-0FC21CF4EF69"}
 */
var vTipoTexto = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"45E0A67A-CD61-4560-88BA-E9C1F82B6634"}
 */
var campo_texto1 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4B648A32-4C23-430E-ABA5-C6F8E825DC9B"}
 */
var names_relacion = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"D86ED06B-87E5-44C7-820D-1E006A5A1E5C"}
 */
var vTabla = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"A514131E-8340-4C3F-9845-B9DABF30D3B4"}
 */
var vServer = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"9BC321E7-D677-4A78-80E0-D7DB5DE56FEA"}
 */
var frm_txt = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"6FADED6E-AEC4-4B8D-9E86-BCEAFC824764"}
 */
var ayudaHTML = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"9E4A6FC3-B7B6-4A6D-A23A-1CE676F949B1",variableType:4}
 */
var vtipo_instrumentadora_ie = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"A4FB93F5-2908-420B-B668-FEDF04E0E12D"}
 */
var vBuscarSeguriProcesos = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"02414A69-CE4E-4E1B-B533-EDC93618D41B",variableType:4}
 */
var vlinea_aux2 = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"999DB4CA-B2E0-491A-B1C9-407F45DC6E15",variableType:4}
 */
var vlinea_aux1 = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"ACFD9985-00C7-4879-A84D-44F19471B945"}
 */
var LegajoApeynomAnes = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"BAEFDBAD-DF6E-4937-800D-5CB8AB0BCE0B"}
 */
var vLegajoAlfa = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"E54C40FA-857B-49CB-92E7-877A8A360F58"}
 */
var LegajoApeynomCirculante = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"95FFB0AE-2390-47F4-A12B-DF6A9BA96F2C"}
 */
var LegajoApeynomCiru = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"C8DFD2F6-C329-4655-B83C-AD24B62ACAC9",variableType:4}
 */
var vHoring = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"71C3EE5B-E363-422A-BC77-5E94E82D4EB3",variableType:4}
 */
var vFecing = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"E5B0836A-23E4-4B1A-AC17-8264D1846BF5"}
 */
var vNombreAnestesista = '';

/**
 * @type {Date}
 *
 * @properties={typeid:35,uuid:"2F934B19-ED45-4D43-80C7-CD65EE08CCF8",variableType:93}
 */
var var_ciri_fecbanio1 = new Date();

/**
 * @type {Date}
 *
 * @properties={typeid:35,uuid:"A9F50A69-7CA0-4412-A775-649F29AA36B1",variableType:93}
 */
var vFechaAhora9 = new Date();

/**
 * @type {Boolean}
 *
 * @properties={typeid:35,uuid:"1A3D1501-B037-4077-893E-89049DD4A892",variableType:-4}
 */
var vHcirOcu = false;

/**
 * @type {Boolean}
 *
 * @properties={typeid:35,uuid:"CED15C18-A615-4263-BE20-0C4482A26948",variableType:-4}
 */
var vSeguquiOk = false;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"592E542A-1D1C-4128-91A5-F0FE69F9E27D",variableType:4}
 */
var vHoraActual = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"8841CEAA-205C-41F9-A108-A2AC819A9A9A",variableType:4}
 */
var vNroPedidoUnico = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"E2BD0153-9790-4439-AFCA-55AF15C86CDD",variableType:4}
 */
var vNroPedido = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"C6930A02-7240-4DBF-B7EB-232530C36C28"}
 */
var vSolucion = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"D3019499-A25A-4040-A1F6-91506DF2267C"}
 */
var vFormulario = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"447C84B4-1D34-4AB9-A048-6FCCC5E61F6E"}
 */
var vfrmActual = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"7B3F5963-9310-42EA-BE9A-50C1D3F52E84"}
 */
var vMatriculaCirujano = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"D678ECD3-42A8-4459-8EBC-9E7D2C8F5B04"}
 */
var vNombreCirujano = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"5FC41160-BF9A-482B-9248-134240CD5672",variableType:4}
 */
var Nprotocolo_bis = 0;

/**
 * @type {JSDataSet}
 * @properties={typeid:35,uuid:"6936B73A-B777-4629-A660-84868976A14D",variableType:-4}
 */
var dataset_lineas_texto_bis = null;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"3B7C7EA6-E440-4D84-96C2-F015621CF155",variableType:4}
 */
var grupo_texto_bis = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"38714D8B-25EC-4F15-B444-8636BF4832EB",variableType:4}
 */
var filas_texto_bis = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"14D0CC40-6155-4F67-98C6-677B86810545"}
 */
var tempHTML = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"8D348DC5-2ED0-4FC3-8483-21AAA5939248",variableType:4}
 */
var vlinea_aux = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"DE6DDBB3-EF80-4B4C-B888-A54330A4E364"}
 */
var Edad = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"3EF1ADB8-1154-4D50-8F62-18EBDF2260F5",variableType:4}
 */
var vtipo_aneste_ie = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"8A8B5FF6-32A3-46F6-BF57-8AB130413516",variableType:4}
 */
var vtipo_neonato_ie = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"D2694B37-11EF-476D-83B0-37A117FA58CE",variableType:4}
 */
var vtipo_partero_ie = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"1149E93A-620C-47EF-84C9-1A844779E329",variableType:4}
 */
var vtipo_ciru_ie = 1;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"7AD8A3E6-65FF-4766-8C18-9E44D55E0BFE",variableType:4}
 */
var vTipoMedico = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"34245E78-F4E8-4A4A-BCCB-E5F984C4CB73",variableType:4}
 */
var nine_value = 9;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"8DF6C9F6-27E6-4C0B-AC9D-326C266DA98D",variableType:4}
 */
var vCodProt = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"FA16FAAB-94CE-43CA-97DB-C592CB40739A",variableType:4}
 */
var vItemProt = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"ADEA9B61-97B7-4547-85F2-9A036BF769CD",variableType:4}
 */
var vNroPedidoProtesis = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"5E90284B-F47E-4FAE-A888-60862E6A0E96"}
 */
var vTipoProtesis = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A70CC7E9-E081-47AF-8434-FADFD4369CE1",variableType:4}
 */
var vTipoTecnico = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"7B9750D7-8B85-4697-B8C4-EACA3324AFAA",variableType:4}
 */
var vLegajoTecnicoArcoCIE = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"0A5EC2C3-546D-4FAC-8F9C-32F6E9333124",variableType:4}
 */
var vLegajoTecnicoArcoC = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"D5CBFEB3-25FC-46F4-92E9-C63ABF574E38",variableType:4}
 */
var vLegajoAnestesistaIE = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"FFB67281-FF51-4960-8DDB-4C2009A0636C",variableType:4}
 */
var vLegajoAnestesista = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"EE460F33-DD18-4142-A1D4-8F3003788E35",variableType:4}
 */
var vLegajoActual = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"056B9EB9-2FD4-433F-9AD5-3258714248CD"}
 */
var vOperadorActual = '';

/**
 * @type {Boolean}
 *
 * @properties={typeid:35,uuid:"034EA308-BD88-4FF9-882A-C0D154215CEA",variableType:-4}
 */
var vSolomedicos = false;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"D73AD6B0-E647-46AD-9097-8145E95D65E0",variableType:4}
 */
var vNro2 = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"38CF2C2F-221C-4249-B82F-BE7139A18B3E",variableType:4}
 */
var vGrupo2 = 0;

/**
 * @type {Boolean}
 *
 * @properties={typeid:35,uuid:"BBFC30C4-901A-40B7-9B42-13D590DB3F96",variableType:-4}
 */
var vAltaProtocolo = false;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"4CDDA381-01B1-44DA-BACC-EA76AD848716",variableType:4}
 */
var vFechaActual = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"263ED3C6-83C4-4763-AD08-6DBECC0CB3E4"}
 */
var vCajaAlfa = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"1A2234C1-894E-4B7B-B75F-BC9D2AB6F060",variableType:4}
 */
var vCaja = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"72D54598-E97F-4D43-AB19-6B1C19F3627A",variableType:4}
 */
var vCodNome = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4C5FDF04-D9C5-4485-B617-F244AFCBF5F6"}
 */
var anatobgral = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"8812987C-91E6-4CD3-8E44-18350B0D569F",variableType:4}
 */
var vNroSolicitud = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"F9C9EE3F-AA35-45BE-8E6F-AA3ABF448919",variableType:4}
 */
var eleven_value = 11;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"F7C6C68D-20B6-46D5-AFB7-8F2FE83EFD73"}
 */
var anatpaob1 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"E26D4BBD-53B4-41BE-B009-70205A1A1CD1"}
 */
var vProfeAlfa = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"756DD2AF-815F-494A-9949-4D2E7546725C",variableType:4}
 */
var vNomencla = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"54D5960B-34D2-4FC8-82DD-2CFA13A7DB84",variableType:4}
 */
var vTipoNome = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"2A8582D5-F82F-43F6-B51B-9BAB2B360826"}
 */
var vNomenclaAlfa = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"CEA38151-C691-4267-A987-968CF749CB7A"}
 */
var obstetritxt6 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"AF171C6D-38F1-4CE6-9025-31B68797E0D8"}
 */
var obstetritxt5 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"939D5051-8645-473C-99D0-0B86707459DC"}
 */
var obstetritxt4 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"101C97F9-C672-4A3E-AFBE-082127D31F39"}
 */
var obstetritxt3 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4DA64633-C154-4313-8697-33D2F7C6838C"}
 */
var obstetritxt2 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"DB4F54A9-80CF-483C-871D-1EE69D6512A1"}
 */
var obstetritxt1 = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"59221290-FA6C-4E2E-BB6A-CD1C96B169B9",variableType:4}
 */
var vPatologia = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"6F3D1493-7563-42D1-8762-EE03CD426E99"}
 */
var hcicirtxt8 = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"3EFD7934-31FB-4D5C-890C-5EC2A2CF78D7",variableType:4}
 */
var vInterven0 = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"1ADFEBCC-A881-4BF2-9C84-847F6EEFC4F8"}
 */
var hcicirtxt7 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"B14C8749-B595-4AE1-8408-C76D12AD6F9C"}
 */
var hcicirtxt6 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"45B6FA36-091B-485E-B3BE-186FB557368D"}
 */
var hcicirtxt5 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"C180E134-C911-48FD-91D7-FD8035B0AFE2"}
 */
var hcicirtxt4 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"15B9A448-D02B-4EB0-B464-7393A32F321E"}
 */
var hcicirtxt3 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"1EF98755-B2E3-474C-9730-59B5445EA1F6"}
 */
var hcicirtxt2 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"BA2970B5-782A-449F-9F5F-C96664D54FE8"}
 */
var hcicirtxt1 = '';

/**
 * @type {Boolean}
 *
 * @properties={typeid:35,uuid:"2FD9FC73-FB5B-455A-BB6A-9C5928BEC1FE",variableType:-4}
 */
var vAnestesiaOk = false;

/**
 * @type {Date}
 *
 * @properties={typeid:35,uuid:"70777E4A-E0BB-4E41-B18E-B7C9110920D6",variableType:93}
 */
var var_ciri_fecrasura = new Date();

/**
 * @type {Date}
 *
 * @properties={typeid:35,uuid:"D6124A5C-3048-464E-9AD5-BB80472B431C",variableType:93}
 */
var var_ciri_fecbanio = new Date();

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"343171F8-47D1-4420-8AF7-C21D9C3B7DB4",variableType:4}
 */
var vPinzasInicio = 0;

/**
 * @type {Date}
 *
 * @properties={typeid:35,uuid:"3B5D82AF-96AC-4597-B1F6-53A442EF01D2",variableType:93}
 */
var vFechaFinal = new Date();

/**
 * @type {Date}
 *
 * @properties={typeid:35,uuid:"FC39906D-CADF-4DBC-8ADB-BBF700548094",variableType:93}
 */
var vFechaInicio = new Date();

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"E5ECEEAE-3E16-41FA-900A-C17FB6FACD39",variableType:4}
 */
var vQuirofano = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"086A19D0-7260-47E3-AD8B-8AB10F914898",variableType:4}
 */
var vciri_legneonato = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"BAEFFA2C-86A7-47D6-945D-2729EE214966",variableType:4}
 */
var vciri_legpartero = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"3F2A64BA-683C-4BA9-86FA-A2AA94F3ED24",variableType:4}
 */
var vciri_legciru = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"BDE10FA8-B801-48F0-879A-B957FA2FB64D",variableType:4}
 */
var vNroProtocolo = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"FC38410B-0E66-4D91-BAB4-24C9C74A34F1",variableType:4}
 */
var vAnesChek = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"940D5D96-EC14-46A0-9420-C2084CC2E05E",variableType:4}
 */
var vInterven = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"F7396952-AF8D-4B17-A25A-D42D94C26310",variableType:4}
 */
var vHoraCarga = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"EB8CE34C-E4D8-4904-959B-3040CB42FF3D",variableType:4}
 */
var vFechaCarga = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"D10543CA-2D9F-4F6D-8B22-9FA081C7E26C",variableType:4}
 */
var current_obstetri_gest = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"3C0A5B31-6D13-4E0E-8790-836567FC0D09",variableType:4}
 */
var vHorcarga = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"D461794C-7912-453D-8233-14C12BB72E8F",variableType:4}
 */
var vFeccarga = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"FAB49AD5-E1D6-4AE8-8552-E72581F2A930"}
 */
var proto9 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"B3F68EE1-CEB5-4993-89E4-02FB9EE96FE1"}
 */
var proto8 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"390D43A2-04BC-4F39-851D-64127561AD7C"}
 */
var proto7 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"8418F37B-D777-401D-815F-74E22637A779"}
 */
var proto6 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"62CB990F-9E92-48B9-AF6A-52B3A155DEB7"}
 */
var proto5 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"A8095542-D126-499D-9D02-9C32666577D5"}
 */
var proto4 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4A5B623F-8AAA-4549-A799-501926B33014"}
 */
var proto3 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4A3BC2A5-0389-4ACF-9D69-BCE20ABB6820"}
 */
var proto2 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"C2D47F01-9515-4EB4-B5A9-640B3B5A8822"}
 */
var proto1 = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"E5604B7D-A9AA-4D7F-8D4B-7EC6D1D6ECA9"}
 */
var vNameSolucion = '';

/**
 * @type {Date}
 *
 * @properties={typeid:35,uuid:"FA81BEF6-F325-4415-969E-65928E9D3C7D",variableType:93}
 */
var vFechaIngreso = new Date();

/**
 * @type {Boolean}
 *
 * @properties={typeid:35,uuid:"53990B3F-AB4C-4771-9F66-D0B2117FF4FD",variableType:-4}
 */
var vClose = false;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"6467CD7D-A5E8-4CF8-8E7A-6DCC36502488"}
 */
var vEsHemodinamia = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"233C5ED5-2A34-4AFE-8B15-C3904682D88A"}
 */
var vOperador = '';
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"D5167468-EC0E-44A3-91EC-50A43493C6A4",variableType:4}
 */
var vEmpresa = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"DEBABACC-4BEF-4FC2-91FD-AE440B443843"}
 */
var Hiscli_edit = '';

/**
 * @type {Boolean}
 *
 * @properties={typeid:35,uuid:"072E8170-96F4-48D5-8048-B485FD3884A3",variableType:-4}
 */
var vDigVerif = false;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"6F42EC8B-F0E8-41DD-B87D-8F0EE9F83EBC",variableType:4}
 */
var vTipoOperador = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"852762DE-580E-4F10-A4AD-2DB7A767166A",variableType:4}
 */
var vHisclin = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"B2B35CFD-D26F-4EEC-8F3A-40ECA05F7B4C",variableType:4}
 */
var vHoraIngreso = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A77B33DB-D68D-46A2-BCD7-947ED5937073",variableType:4}
 */
var vSexo = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"147BBA74-8E82-4ECA-AB9D-368E09D99F7D"}
 */
var vPassOperador = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"63F4937E-4B8A-4524-A65A-4164E9AC52DF"}
 */
var vApeyNom = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"BC747D64-79A3-40E7-8BF0-36E8E1FD9F6D"}
 */
var vHisclistrynro = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"6CC8DAAB-EF36-4942-A211-E331421B6E0D",variableType:4}
 */
var vClave = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A842918D-DFDD-400E-A6F5-E5F21CF48908",variableType:4}
 */
var vLega = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"DEFE1D34-1289-46DF-BA14-853E1B8216D1",variableType:4}
 */
var gbl_Lega_ac = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"00FD7537-66AB-4FB6-BD54-E0F25F183A5F",variableType:4}
 */
var gbl_Lega_es = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"809032DD-0E78-4720-A019-2DDB45DE47DB",variableType:4}
 */
var aux_Lega = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"30C78B06-50EE-4954-993A-BAE2B4E5A24C",variableType:4}
 */
var one_value = 1;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A706D9BB-EB13-4654-B999-33F97C16849E",variableType:4}
 */
var vZero = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"C0104156-830E-42D2-92CD-FBB0BB0153D7",variableType:4}
 */
var vHiscli = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"E63FE589-A5D8-4646-8668-282983A4716F"}
 */
var vAlfa = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"2973108F-9AFC-47BE-8298-0C0ABCD13F0B",variableType:4}
 */
var digito_verificador = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"6B3CEAAE-4DA7-4215-97F8-F55AECE49B9C",variableType:4}
 */
var vlargo = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"ED08D997-1C1F-41DD-97AA-1778956ADC7D",variableType:4}
 */
var vLegajo = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"D89A4A18-4A45-45BD-9A59-FEF7DA2231D0",variableType:4}
 */
var aux_Legajo = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"5C537E74-F935-4565-B3E0-D5FCF4A9C8DB",variableType:4}
 */
var gbl_Legajo_ac = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"D3487DC7-FDA2-478F-8E52-99EF84FC9732",variableType:4}
 */
var gbl_Legajo_es = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"CFC6A2E7-C66C-4866-97E1-8E853E44AEF3",variableType:4}
 */
var gbl_tipo_Legajo_ac = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"C261FCB7-12FA-4CBB-BAD2-B37C5392FC64",variableType:4}
 */
var gbl_tipo_Legajo_es = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"2FB798EC-2639-4B37-9322-FDAF8E45F8A8",variableType:4}
 */
var gbl_password_ac = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"0ADDBA6F-5FB1-4822-B667-AA1CE600C3EF",variableType:4}
 */
var gbl_password_es = 0;

/**
 * @type {Array}
 *
 * @properties={typeid:35,uuid:"A0DA8165-0B44-4373-A486-CE1815311ED7",variableType:-4}
 */
var names_campos = new Array();

/**
 * @type {Date}
 *
 * @properties={typeid:35,uuid:"B1607CF6-297A-4423-860B-3E6C64AA960E",variableType:93}
 */
var fecha_aux = null;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"9580EB9E-36D4-4ABB-8FFC-1E05A57C626D",variableType:4}
 */
var vHora = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"53CE12F9-929E-44A1-82DC-7B00E9C30AD6"}
 */
var vcargaalerta = '';
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"A06FBDD4-03CD-4CBC-B158-35B5DBECB836"}
 */
var gbl_nombre_legajo_ac = '';
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"11D329F5-05C1-4C5E-8683-33837C558986"}
 */
var gbl_nombre_legajo_es = '';
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"D6F2A8C3-ACE5-48B5-B0ED-159BD7655972"}
 */
var gbl_Empresa_ac = '';
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4E9387B5-D72F-41D7-89DE-A121E9B137AE"}
 */
var gbl_Empresa_es = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"BF90F353-AFCA-4E58-B871-9129A2DADAEB",variableType:4}
 */
var valerta = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"28E05C26-2058-499C-9039-0564DC1D350C",variableType:4}
 */
var txt_1 = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"FF684F8E-D4B9-455D-8951-4355412E23DD",variableType:4}
 */
var txt_1g = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"D575241B-2FF5-4E56-88FC-E9BFEF0511F9"}
 */
var txt_2 = null;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"503BCDA8-8297-489B-8B12-675B96DFCAF8"}
 */
var txt_4 = null;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"EFC7F6B3-CB75-442E-9282-E3484AC35788"}
 */
var vTipoEdad = null;

/**
 * Formatea fechas
 *
 * @param {Date} fec
 * @param {String} formato
 *
 * @properties={typeid:24,uuid:"123C72B7-E702-475C-A34A-06935EBD7648"}
 */
function FormatearFecha(fec, formato) {
	//var fec = new Date()
    if (formato.substr(1,1)!='H'){
    	var dia = AjustarLong(fec.getDate(), 2)
    	var mes = AjustarLong(fec.getMonth() + 1, 2)
    	var ano = AjustarLong(fec.getFullYear(), 2)
    	var dia1 = fec.getDate()
    	var mes1 = fec.getMonth() + 1
    	var ano1 = fec.getFullYear()
    	var dia_ed=''
    	var mes_ed=''
		if (mes1<10){
			mes_ed="0"+mes1
		}else{
			mes_ed=mes1
		}
		if(dia1<10){
			dia_ed="0"+dia1
		}else{
			dia_ed=dia1
		}
    }else{
    	var hora = AjustarLong(fec.getHours(), 2)
    	var minuto = AjustarLong(fec.getMinutes(), 2)
    	var segundo = AjustarLong(fec.getSeconds(), 2)
    	var mil = AjustarLong(fec.getMilliseconds(), 2)
		var hora_ed=''
		var min_ed=''
		var seg_ed=''
    	var mil_ed=''
    	if (hora < 10){
			hora_ed='0'+hora
		}else{
			hora_ed=hora
		}
		if (minuto < 10){
			min_ed='0'+minuto
		}else{
			min_ed=minuto
		}
		if (segundo < 10){
			seg_ed='0'+segundo
		}else{
			seg_ed=segundo
		}	
    	if(mil<10){
    		mil_ed="0"+mil
    	}else{
    		mil_ed=mil.toString().substr(0,2)
    	}
    }

	switch (formato) {
	case 'DDMMAAAA':
		return dia_ed + '' + mes_ed + '' + ano
	case 'AAAAMMDD':
		return ano1 + '' + mes_ed + '' + dia_ed
	case 'HHMM':
		return hora_ed + '' + min_ed
	case 'HHMMSS':
		return hora_ed + '' + min_ed + '' + seg_ed
	case 'HHMMSSDD':
		return hora_ed + '' + min_ed + '' + seg_ed + '' + mil_ed
	case 'DD/MM/AAAA':
		return dia_ed + '/' + mes_ed + '/' + ano
	case 'AAAA/MM/DD':
		return ano + '/' + mes_ed + '/' + dia_ed
	case 'HH:MM':
		return hora_ed + ':' + min_ed
	case 'HH:MM:SS':
		return hora_ed + ':' + min_ed + ':' + seg_ed
	default:
		return '0'
	}
}

/**
 * Ajusta la longitud de un numero
 *
 * @param {Number} numero
 * @param {Number} digitos
 * 
 * @properties={typeid:24,uuid:"869B4D28-D96D-448F-AE00-648524027B04"}
 */
function AjustarLong(numero, digitos) {
	if (numero < 10)
		return 0 + numero
	else
		return numero
}

/**
 * Validacion de CUIT
 *
 * @properties={typeid:24,uuid:"6156884B-602A-4D5F-A31E-837E96181C89"}
 */
function ValidarCUIT(CUIT) {
	var aux1 , aux2
	if (isNaN(CUIT) == false) {
		aux1 = (Number(CUIT.substr(0, 1)) * 5 + Number(CUIT.substr(1, 1)) * 4 + Number(CUIT.substr(2, 1)) * 3 + Number(CUIT.substr(3, 1)) * 2 + Number(CUIT.substr(4, 1)) * 7 + Number(CUIT.substr(5, 1)) * 6 + Number(CUIT.substr(6, 1)) * 5 + Number(CUIT.substr(7, 1)) * 4 + Number(CUIT.substr(8, 1)) * 3 + Number(CUIT.substr(9, 1)) * 2) % 11;
		aux2 = 11 - aux1;
		switch (aux2) {
		case 11:
			aux2 = 0;
			break;
		case 10:
			aux2 = 9;
			break;
		}
		if (CUIT.substr(10, 1) == aux2)   // CUIT válido
			return 0;
		 else 		                      // CUIT Inválido
			return 1;
	} else 		                          // CUIT no numérico
		return 2;
}

/**
 * Inicializacin de los campos de una Tabla.
 * 
 * @param {String} form  Nombre del formulario, puede ir vacio
 * @param {String} base  Nombre de la base, puede ir vacia
 * @param {String} tabla Nombre de la tabla, puede ir vacia
 *
 * @properties={typeid:24,uuid:"D295B8A6-263B-4E7A-9914-B568CE5BF330"}
 */
function InicializarDatos(form, base, tabla) {
	if (base == '') {
		var str = currentcontroller.getDataSource()
		str = str.split(':')
		str = str[1]
		str = str.split('/')

		if (form == '') form = currentcontroller.getName()
		if (base == '') base = str[1]
		if (tabla == '') tabla = str[2]
	}
	var table = databaseManager.getTable(base, tabla)
	var columnNamesArray = table.getColumnNames();
	for (var i = 0; i < columnNamesArray.length; i++) {
		var name = forms[form].alldataproviders[i];

		var columnNames = table.getColumnNames()

		var firstColumnName = columnNamesArray[i];
		var jscolumn = table.getColumn(firstColumnName);

		if(forms[form].foundset[firstColumnName]== null)
		{
			switch (jscolumn.getType()) {
			case JSColumn.TEXT:
				forms[form].foundset[firstColumnName] = " "
				break
			case JSColumn.INTEGER:
			case JSColumn.NUMBER:
				forms[form].foundset[firstColumnName] = 0
				break
			case JSColumn.DATETIME:
				if (jscolumn.getAllowNull())
					forms[form].foundset[firstColumnName] = null
				else {
					var fec = new Date
					forms[form].foundset[firstColumnName] = globals.FormatearFecha(fec, 'AAAAMMDD')
				}
				break
			default:
				forms[form].foundset[firstColumnName] = 0
				break
			}
			
		}
	}
}

/**
 * Verifica si un campo tiene espacios o null como valor
 *
 * @param {String} texto
 *
 * @properties={typeid:24,uuid:"F3308520-0392-4166-A570-441DD9EDA614"}
 */
function IsBlank(texto) {
	if(texto == null || ''== utils.stringTrim(texto)) 
		return true
	//	else if (texto.match(/\w/))
	return false
}

/**
 * Convierte un campo Date a entero
 *
 * @param {Date} Fecha
 * 
 * @properties={typeid:24,uuid:"85F6E469-71A1-44BB-8F5A-4C716BB4DBBA"}
 */
function DateToInteger(Fecha) {
	var Retorno = 0
	if (Fecha != null) {
		var dia = AjustarLong(Fecha.getDate(), 2)
		var mes = AjustarLong(Fecha.getMonth() + 1, 2)
		var ano = Fecha.getFullYear()
		Retorno = ano + '' + mes + '' + dia
	}
	return (Retorno)
}

/**
 * Convierte un campo entero a Date
 *
 * @param {Number} Numero
 *
 * @properties={typeid:24,uuid:"7A60BCA6-C0D3-452F-BBE0-58794F867A34"}
 */
function IntegerToDate(Numero) {
	if (Numero > 0) {
		var FechaString = Numero.toString()
 		var FechaDate = FechaString.substr(0, 4) + '/' + FechaString.substr(4, 2) + '/' + FechaString.substr(6, 2)
		var FechaExport = new Date(FechaDate);
		return (FechaExport)
	}
	else
		return (null)
}

/**
 * Convierte un entero a tipo HH:MM
 *
 * @param {Number} Numero
 * @param {String} formato
 *
 * @properties={typeid:24,uuid:"3148BBBE-10F2-417B-82F8-F11FCEB9A7B7"}
 */
function IntegerToTime(Numero, formato) {
	var Hora = new Date
	var HoraString = Numero.toString()
	
	switch (formato) {
		case 'hhmmss':
			Hora.setHours(HoraString.substr(0, 2),HoraString.substr(2, 2),HoraString.substr(4, 2),0)
		case 'hhmmssmm':
			Hora.setHours(HoraString.substr(0, 2),HoraString.substr(2, 2),HoraString.substr(4, 2),HoraString.substr(6, 2))  
		default:
			Hora.setHours(HoraString.substr(0, 2),HoraString.substr(2, 2),0,0)
	}
	return(Hora)
/**	
	var Texto = Numero.toString()
	if (Texto != null)
		return (Texto.substr(0, 2) + ':' + Texto.substr(2, 2))
	else
		return (Texto)
*/		
}

/**
 * Convierte un dato tipo HH:MM a entero
 *
 * @param {Date} Hora
 * @param {String} formato
 *
 *
 * @properties={typeid:24,uuid:"053CB953-41CF-4F73-A9A1-527DD6C3EE1D"}
 */
function TimeToInteger(Hora, formato) {
	switch (formato) {
		case 'hhmmss':
			return Hora.getHours() + '' + Hora.getMinutes() + '' + Hora.getSeconds()
		case 'hhmmssmm':
			return Hora.getHours() + '' + Hora.getMinutes() + '' + Hora.getSeconds() + '' +  AjustarLong(Hora.getMilliseconds(),2)  
		default:
			return Hora.getHours() + '' + Hora.getMinutes()
	}
/**	
	var Retorno = 0
	if (Hora != null)
		Retorno = FormatearFecha(Hora, Formato)
	return (Retorno)
*/
}

/**
 * @param {string} form
 *
 * @properties={typeid:24,uuid:"41FD9D7F-BE54-484C-B477-7FA7E8700C56"}
 */
function InitializarCheks(form) {
	for (var i = 0; i < forms[form].elements.allnames.length; i++) {

		var name = forms[form].elements.allnames[i]; // nombre de el elemento

		var elem = forms[form].elements[name]; // propiedades del elemento

		if (elem.getElementType() == 'CHECK') {
			switch (forms[form].foundset[name]) {
			case "X":
			case "x":
			case "S":
				forms[form].foundset[name] = '1';
				break;
			case "N":
			case " ":
				forms[form].foundset[name] = '0';
				break;
			}

		}
	}
}

/**
 * @param {string} form
 *
 * @properties={typeid:24,uuid:"13638164-68E7-469A-9F37-F413BD9AA9E8"}
 */
function ConvierteCheksaGrabar(form) {
	//plugins.dialogs.showInfoDialog("",form,"ok")
	for (var i = 0; i < forms[form].elements.allnames.length; i++) {
		var name = forms[form].elements.allnames[i]; // nombre de el elemento
		var elem = forms[form].elements[name]; // propiedades del elemento
		if (elem.getElementType() == 'CHECK') {
			switch (forms[form].foundset[name]) {
			case "1":
				forms[form].foundset[name] = 'X';
				break;
			case "0":
				forms[form].foundset[name] = ' ';
				break;
			}
		}
	}

}

/**
 *
 * @param {string} form
 *
 * @properties={typeid:24,uuid:"DA57A27C-A52D-4F7A-A827-19532FCACEDE"}
 */
function DesmarcaCheks(form) {
	for (var i = 0; i < forms[form].elements.allnames.length; i++) {
		var name = forms[form].elements.allnames[i]; // nombre de el elemento
		var elem = forms[form].elements[name]; // propiedades del elemento

		if (elem.getElementType() == 'CHECK') {
			switch (forms[form].foundset[name]) {
			case "1":
				forms[form].foundset[name] = '0';
				break;
			case "0":
				forms[form].foundset[name] = '0';
				break;
			}
		}
	}

}

/**
 *
 * @param {string} form
 *
 * @properties={typeid:24,uuid:"4842D535-FFFD-43C4-AC27-8488A53D3FE6"}
 */
function ValidoIngresoCheks(form) {
	var tieneCheks = false;
	for (var i = 0; i < (forms[form].elements.allnames.length - 1) && !tieneCheks; i++) {
		var name = forms[form].elements.allnames[i]; // nombre de el elemento
		var elem = forms[form].elements[name]; // propiedades del elemento
		if (elem.getElementType() == 'CHECK') {
			switch (forms[form].foundset[name]) {
			case "X":
			case "x":
				tieneCheks = true;
				break;
			case "1":
				tieneCheks = true;
				break;
			}
		}
	}
	if (tieneCheks) {
		return true
	} else {
		return false
	}
}

/**
 *
 * @param {number} protocolo
 * @param {number} codigo
 *
 * @properties={typeid:24,uuid:"31D50DAD-C490-4ADE-A82B-70269C6C098C"}
 * @AllowToRunInFind
 */
function MostrarTextoCargado(protocolo, codigo) {
	var fs1 = databaseManager.getFoundSet("asistencial", "tbc_protoc_txt")
	var texto = ""
	var j = 0;
  
	fs1.find()
	fs1['protxt_protocolo'] = protocolo
	fs1['protxt_grupo'] = codigo
	fs1['protxt_nro1'] = 1
	fs1.search()
	var filasf = fs1.getSize()
	if (filasf > 0) {

		fs1.setSelectedIndex(1)
		texto = utils.stringTrim(fs1['protxt_linea']);
		for (j = 2; j < filasf + 1; j++) {
			fs1.setSelectedIndex(j)
			if (protocolo < 77200) {
				texto = texto + "\n" + utils.stringTrim(fs1['protxt_linea']);
			} else {
				texto = texto + fs1['protxt_linea'];
			}
		}
	}
	return (texto)
}

/**
 *
 * @param {number} protocolo
 * @param {number} codigo
 * @param {string} texto
 *
 * @properties={typeid:24,uuid:"A6620421-B587-4B6E-A41E-3EEDB844731D"}
 * @AllowToRunInFind
 */
function GrabarTexto(protocolo, codigo, texto) {
	texto = utils.stringTrim(texto)
	application.setClipboardContent(texto)
	var fs1 = databaseManager.getFoundSet("asistencial", "tbc_protoc_txt")
	var thePressedButton = "Si"
	
	var name = new Array()
	name[0] = "protxt_protocolo"
	name[1] = "protxt_grupo"
	name[2] = "protxt_nro1"
	name[3] = "protxt_secuen"
	name[4] = "protxt_linea"
	name[5] = "protxt_tope"
 
	if (thePressedButton == "Si" && texto !== null) {
		var longitudTexto = 0;
		longitudTexto = texto.length;
		var posicionFinal = 0;
		posicionFinal = texto.indexOf("\n");
		var posicionInicial = 0;
		if (posicionFinal < 0) {
			posicionFinal = texto.length
		}
		
		if (protocolo < 77200) {
			var kenter = texto.indexOf("\n");
			while (kenter > 0) {
				texto = texto.replace("\n", "");
				kenter = texto.indexOf("\n");
			}
		}
		
		var j = 0;
		var lineas = Math.round(longitudTexto / 78);

		var resto = longitudTexto % 78;
		posicionFinal = 78;
		if (resto > 0) {
			++lineas;
		}
		var lineascab = 0;

		for (j = 1; j < lineas + 1; j++) {
			var vlarguito = texto.substr(posicionInicial, 78)
			if (vlarguito != '') {
				
				fs1.newRecord();
				fs1[name[0]] = protocolo
				fs1[name[1]] = codigo
				fs1[name[2]] = 1;
				fs1[name[3]] = j;
				fs1[name[4]] = texto.substr(posicionInicial, 78);
				fs1[name[5]] = 0;
				
				var args = new Array()
				args[0]=protocolo
				args[1]=codigo
				args[2]=1
				args[3]=j
				args[4]=texto.substr(posicionInicial, 78)
				args[5]=0
				/*
				var done = plugins.rawSQL.executeSQL("asistencial","tbc_protoc_txt","INSERT INTO tbc_protocolo_txt (ProTxt_Protocolo, ProTxt_Grupo, ProTxt_Nro1, ProTxt_Secuen, ProTxt_Linea, ProTxt_Tope) VALUES (?, ?, ?, ?, ?, ?)",args)
				
				if(!done){
					//plugins.rawSQL.flushAllClientsCache("asistencial","tbc_protocolo_txt")
				//}else{
					plugins.dialogs.showErrorDialog("Error rawSQL - Grabando Texto",plugins.rawSQL.getException().getMessage(), "Ok")
					plugins.dialogs.showErrorDialog("Error rawSQL - grabando tbc_protoc_txt","Error de grabación en: "+ protocolo + " - " + codigo + " - línea: "+ j + " - Avise inmediatamente a Sistemas, por favor!!", "Ok")
					application.output(plugins.rawSQL.getException().getMessage())
				}
				*/
				databaseManager.saveData(fs1.getRecord(1))
				posicionInicial = posicionInicial + 78;
				++lineascab
			}
		}
		var error1=''
		var error2=''
		var array = databaseManager.getFailedRecords(fs1)
		for (var i = 0; i < array.length; i++) {
			var record = array[i];
			var jstable = databaseManager.getTable(record);
			var tableSQLName = jstable.getSQLName();
			error1='Error de Grabación en Tabla:' + tableSQLName + ' en server:' + jstable.getServerName() + ' falló la grabación. Avise urgente a Sistemas, por favor!'
			error2='Error en grabación '+record.exception;
			if (record.exception.getErrorCode() == ServoyException.RECORD_VALIDATION_FAILED) {
		// exception thrown in pre-insert/update/delete event method
				var thrown = record.exception.getValue()
				plugins.dialogs.showErrorDialog("Error de grabación","Record validation failed: " + thrown)
			}
		}
		if(error1!=''){
			plugins.dialogs.showErrorDialog("Error en grabacion de Texto",error1,"Ok")
			plugins.dialogs.showErrorDialog("Error en grabacion de Texto",error2,"Ok")
			plugins.dialogs.showInfoDialog("Reintentar","Reintente grabar!!")
		//}else{
			//databaseManager.refreshRecordFromDatabase(fs1,-1)
		}
		fs1.newRecord();
		fs1[name[0]] = protocolo
		fs1[name[1]] = codigo
		fs1[name[2]] = 0;
		fs1[name[3]] = 0;
		fs1[name[4]] = " ";
		fs1[name[5]] = lineascab;
		
		databaseManager.saveData(fs1.getRecord(1))
		error1=''
		error2=''	
		var array1 = databaseManager.getFailedRecords(fs1)
		for (var ii = 0; ii < array1.length; ii++) {
			var record1 = array1[ii];
			var jstable1 = databaseManager.getTable(record1);
			var tableSQLName1 = jstable1.getSQLName();
			error1='Error de Grabación en Tabla:' + tableSQLName1 + ' en server:' + jstable1.getServerName() + ' falló la grabación. Avise urgente a Sistemas, por favor!'
			error2='Error en grabación '+record1.exception;
			if (record1.exception.getErrorCode() == ServoyException.RECORD_VALIDATION_FAILED) {
		// exception thrown in pre-insert/update/delete event method
				var thrown1 = record1.exception.getValue()
				plugins.dialogs.showErrorDialog("Error de grabación","Record validation failed: " + thrown1)
			}
		}
		
		if(error1!=''){
			plugins.dialogs.showErrorDialog("Error en grabacion de Texto",error1,"Ok")
			plugins.dialogs.showErrorDialog("Error en grabacion de Texto",error2,"Ok")
			plugins.dialogs.showInfoDialog("Reintentar","Reintente grabar!!")
		//}else{
			//databaseManager.refreshRecordFromDatabase(fs1,1)
		}
	}
}

/**
 *
 * @param {number} fecha_nac
 * 
 * @properties={typeid:24,uuid:"AEC13856-021E-46FE-8E00-8ECD4D75FD13"}
 */
function CalculoEdad(fecha_nac) {
	var final_mes = new Array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);

	globals.fecha_aux = fecha_nac;
	var fecha_aux1 = fecha_nac.toString()
	var anio_nac = utils.stringToNumber(fecha_aux1.substr(0,4))
	var mes_nac = utils.stringToNumber(fecha_aux1.substr(4,2))
	var dia_nac = utils.stringToNumber(fecha_aux1.substr(6,2))
	//var anio_nac = globals.fecha_aux.getFullYear()
	//var mes_nac = globals.fecha_aux.getMonth() + 1
	//var dia_nac = globals.fecha_aux.getDate()
	//var fecha_nac_aux = new Date(anio_nac, mes_nac, dia_nac)
	var fecha_actual = new Date();
	//fecha_actual.getUTCDate()
	fecha_actual = application.getServerTimeStamp()
	var anio_actual = fecha_actual.getFullYear();
	var resto = anio_actual % 4;
	if (resto == 0) final_mes[1] = 29;
	var edad = fecha_actual.getFullYear() - anio_nac;
	if (edad != 0) {
		if ((fecha_actual.getMonth()+1) < mes_nac) {
			--edad;
		} else {
			if ((fecha_actual.getMonth()+1) == mes_nac) {
				if (fecha_actual.getDate() < dia_nac) {
					--edad;
				}
			}
		}
		if (edad > 1) {
			globals.vTipoEdad = "años";
		} else {
			if (edad == 1){
			    globals.vTipoEdad = "año";
			}else{
				if (mes_nac > (fecha_actual.getMonth()+1)){
					edad = mes_nac - (fecha_actual.getMonth()+1) 
				}else{
				    edad = (fecha_actual.getMonth()+1) - mes_nac
				}
				if (edad != 0) {
					if (edad > 1) {
						globals.vTipoEdad = "meses";
					} else {
						if (fecha_actual.getDate() < dia_nac) {
							edad = (fecha_actual.getDate() + final_mes[mes_nac]) - dia_nac;
							globals.vTipoEdad = "días"
						} else {
							globals.vTipoEdad = "mes";
						}
					}
				} else {
					if (dia_nac > (fecha_actual.getMonth()+1)){
						edad = dia_nac - (fecha_actual.getMonth()+1) 
					}else{
					    edad = fecha_actual.getDate() - dia_nac
					}
					if (edad > 1) {
						globals.vTipoEdad = "días";
					} else {
						edad = 1;
						globals.vTipoEdad = "día";
					}
				}				
			}				
		}
	} else {
		if (mes_nac > (fecha_actual.getMonth()+1)){
			edad = mes_nac - (fecha_actual.getMonth()+1) 
		}else{
		    edad = (fecha_actual.getMonth()+1) - mes_nac
		}
		if (edad != 0) {
			if (edad > 1) {
				globals.vTipoEdad = "meses";
			} else {
				if (fecha_actual.getDate() < dia_nac) {
					edad = (fecha_actual.getDate() + final_mes[mes_nac]) - dia_nac;
					globals.vTipoEdad = "días"
				} else {
					globals.vTipoEdad = "mes";
				}
			}
		} else {
			if (dia_nac > (fecha_actual.getMonth()+1)){
				edad = dia_nac - (fecha_actual.getMonth()+1) 
			}else{
			    edad = fecha_actual.getDate() - dia_nac
			}
			if (edad > 1) {
				globals.vTipoEdad = "días";
			} else {
				edad = 1;
				globals.vTipoEdad = "día";
			}
		}
	}
	return edad
}

/**
 *
 * Convierte un dato tipo HH:MM a entero
 *
 * @param {String} Texto
 *
 * @properties={typeid:24,uuid:"73AC5832-0EF1-452E-89A0-0FBDD6D456EE"}
 */
function TextTimeToInteger(Texto) {
	return (Texto.substr(0, 2) + '' + Texto.substr(3, 2))
	
}

/**
 *
 * @param {number} f_nro_solic
 * @param {number} f_tipnom
 * @param {number} f_codnom
 *
 * @properties={typeid:24,uuid:"B91A6677-4CC8-4C9A-85D3-57125A6346D6"}
 * @AllowToRunInFind
 */
function MostrarTextoCargadoAnatomia(f_nro_solic, f_tipnom, f_codnom) {
	var fs1 = databaseManager.getFoundSet("asistencial", "tbc_anatpaob")
	var texto = '';
	var j = 0;
	var name = new Array()
	name[0] = "apob_nrosolic"
	name[1] = "apob_tipnom"
	name[2] = "apob_codnom"
	name[3] = "apob_secuen"
	name[4] = "apob_linea"

	fs1.find()
	fs1[name[0]] = f_nro_solic
	fs1[name[1]] = f_tipnom
	fs1[name[2]] = f_codnom
	fs1.search()

	var filasf = fs1.getSize()
	if (filasf > 0) {

		fs1.setSelectedIndex(1)
		texto = utils.stringTrim(fs1[name[4]]);
		for (j = 2; j < filasf + 1; j++) {
			fs1.setSelectedIndex(j)
			if (f_nro_solic < 77200) {
				texto = texto + "\n" + utils.stringTrim(fs1[name[4]]);
			} else {
				texto = texto + utils.stringTrim(fs1[name[4]]);
			}
		}
	}
	return texto
}

/**
 *
 * @param {number} f_nro_solic
 * @param {number} f_tipnom
 * @param {number} f_codnom
 * @param {string} f_texto
 *
 * @properties={typeid:24,uuid:"BC667C4F-C1F2-4DAE-BA77-80EE67DE3F05"}
 * @AllowToRunInFind
 */
function GrabarTextoAnatomia(f_nro_solic, f_tipnom, f_codnom, f_texto) {
	f_texto = utils.stringTrim(f_texto)
	application.setClipboardContent(f_texto)
	
	/** @type {JSFoundset} */
	var fs1 = databaseManager.getFoundSet("asistencial", "tbc_anatpaob")
	var j = 0;

	var name = new Array()
	name[0] = "apob_nrosolic"
	name[1] = "apob_tipnom"
	name[2] = "apob_codnom"
	name[3] = "apob_secuen"
	name[4] = "apob_linea"

	fs1.find()
	fs1[name[0]] = f_nro_solic
	fs1[name[1]] = f_tipnom
	fs1[name[2]] = f_codnom
	fs1.search()

	var longitudTexto = 0;
	longitudTexto = f_texto.length;
	var posicionFinal = 0;
	posicionFinal = f_texto.indexOf("\n");
	var posicionInicial = 0;
	if (posicionFinal < 0){
		posicionFinal = f_texto.length
	}
	
	if (f_nro_solic < 77200) {
		var kenter = f_texto.indexOf("\n");
		while (kenter > 0) {
			f_texto = f_texto.replace("\n", "");
			kenter = f_texto.indexOf("\n");
		}
	}
	var tamanio = 0;
	tamanio = fs1.getSize();

	if (tamanio > 0)
		fs1.deleteAllRecords()
	
	var lineas = Math.round(longitudTexto / 78);

	var resto = longitudTexto % 78;
	posicionFinal = 78;
	if (resto > 0)
		++lineas;
	var lineascab = 0;

	for (j = 1; j < lineas + 1; j++) {
		var vlarguito = f_texto.substr(posicionInicial, 78)
		if (vlarguito != '') {
			fs1.newRecord();
			fs1[name[0]] = f_nro_solic
			fs1[name[1]] = f_tipnom
			fs1[name[2]] = f_codnom
			fs1[name[3]] = j;
			fs1[name[4]] = f_texto.substr(posicionInicial, 78);
			databaseManager.saveData(fs1.getSelectedRecord())
			posicionInicial = posicionInicial + 78;
			++lineascab
		}
	}
}

/**
 * @param {Number} f_nro_solic
 * @param {string} f_texto
 *
 * @return {Number}
 * @properties={typeid:24,uuid:"84A58B4E-1176-41F9-8886-FC947D244CA4"}
 */
function CalcularLineasAnatomia(f_nro_solic, f_texto) {
	var longitudTexto = 0;
	longitudTexto = f_texto.length;
	var posicionFinal = 0;
	posicionFinal = f_texto.indexOf("\n");
	
	if (posicionFinal < 0){
		posicionFinal = f_texto.length
	}
	
	if (f_nro_solic < 77200) {
		var kenter = f_texto.indexOf("\n");
		while (kenter > 0) {
			f_texto = f_texto.replace("\n", "");
			kenter = f_texto.indexOf("\n");
		}
	}

	var lineas = Math.round(longitudTexto / 78);

	var resto = longitudTexto % 78;
	posicionFinal = 78;
	if (resto > 0)
		++lineas;
	return lineas;
}

/**
 *
 * @properties={typeid:24,uuid:"CC64F728-4C1C-410E-854D-59E852F38FC3"}
 */
function display(texto) {
	plugins.dialogs.showInfoDialog("Display", texto, "Continuar")
}

/**
 * @param {number} historia
 * @param {number} fecha
 * @param {number} hora
 * @param {number} tipo
 *
 * @return {string}
 * 
 * @properties={typeid:24,uuid:"7F6BE96A-469B-40AF-BEDE-D3CBF68EBCA3"}
 * @AllowToRunInFind
 */
function MostrarTextoCargadoHCIR(historia, fecha, hora, tipo) {
	var fs1 = databaseManager.getFoundSet("asistencial", "tbc_hcicirtxt")
	var texto = '';
	var j = 0;
	var name = new Array()
	name[0] = "hcirx_tiphistclin"
	name[1] = "hcirx_histclin"
	name[2] = "hcirx_fec"
	name[3] = "hcirx_hora"
	name[4] = "hcirx_tittxt"
	name[5] = "hcirx_nrolinea"
	name[6] = "hcirx_linea"

	fs1.find()
	fs1[name[0]] = 0
	fs1[name[1]] = historia
	fs1[name[2]] = fecha
	fs1[name[3]] = hora
	fs1[name[4]] = tipo
	fs1.search()

	var filasf = fs1.getSize()
	if (filasf > 0) {

		fs1.setSelectedIndex(1)
		texto = utils.stringTrim(fs1[name[6]]);
		for (j = 2; j < filasf + 1; j++) {
			fs1.setSelectedIndex(j)
			texto = texto + utils.stringTrim(fs1[name[6]]);
		}
	}
	return texto
}

/**
 *
 * @param {number} historia
 * @param {number} fecha
 * @param {number} hora
 * @param {string} f_texto
 * @param {number} tipo
 * 
 * @properties={typeid:24,uuid:"BB1004AD-1E19-488C-8954-22276BB2EBE3"}
 * @AllowToRunInFind
 */
function GrabarTextoHCIR(historia, fecha, hora, f_texto, tipo) {
	f_texto = utils.stringTrim(f_texto)
	application.setClipboardContent(f_texto)
	
	var fs1 = databaseManager.getFoundSet("asistencial", "tbc_hcicirtxt")
	var j = 0;

	fs1.find()
	fs1['hcirx_tiphistclin'] = 0
	fs1['hcirx_histclin'] = historia
	fs1['hcirx_fec'] = fecha
	fs1['hcirx_hora'] = hora
	fs1['hcirx_tittxt'] = tipo
	fs1.search()

	var longitudTexto = 0;
	longitudTexto = f_texto.length;
	var posicionFinal = 0;
	posicionFinal = f_texto.indexOf("\n");
	var posicionInicial = 0;
	if (posicionFinal < 0){
		posicionFinal = f_texto.length
	}
	
	if (historia < 77200) {
		var kenter = f_texto.indexOf("\n");
		while (kenter > 0) {
			f_texto = f_texto.replace("\n", "");
			kenter = f_texto.indexOf("\n");
		}
	}
	var tamanio = 0;
	tamanio = fs1.getSize();

	if (tamanio > 0)
		fs1.deleteAllRecords()
	application.sleep(200)
	
	var lineas = Math.round(longitudTexto / 78);

	var resto = longitudTexto % 78;
	posicionFinal = 78;
	if (resto > 0)
		++lineas;
	var lineascab = 0;

	for (j = 1; j < lineas + 1; j++) {
		var vlarguito = f_texto.substr(posicionInicial, 78)
		if (vlarguito != '') {
			fs1.newRecord();
			fs1['hcirx_tiphistclin'] = 0
			fs1['hcirx_histclin'] = historia
			fs1['hcirx_fec'] = fecha
			fs1['hcirx_hora'] = hora
			fs1['hcirx_tittxt'] = tipo
			fs1['hcirx_nrolinea'] = j;
			fs1['hcirx_linea'] = f_texto.substr(posicionInicial, 78);
			databaseManager.saveData(fs1.getSelectedRecord())
			posicionInicial = posicionInicial + 78;
			++lineascab
		}
	}
}

/**
 *
 * @param {number} historia
 * @param {number} gestacion
 * @param {number} grupo
 * @param {String} f_texto
 * 
 * @properties={typeid:24,uuid:"B12B12D9-7E0C-4909-A5E0-4CE6C6BD25CA"}
 * @AllowToRunInFind
 * @SuppressWarnings(unused)
 */
function GrabarTextoOBSTXT(historia, gestacion, grupo, f_texto) {
	f_texto = utils.stringTrim(f_texto)
	var fs1 = databaseManager.getFoundSet("asistencial", "tbc_obstetritxt")
	var j = 0;

	var name = new Array()
	name[0] = "obstxt_hcl"
	name[1] = "obstxt_tipo"
	name[2] = "obstxt_gesta"
	name[3] = "obstxt_grupo"
	name[4] = "obstxt_secuencia"
	name[5] = "obstxt_linea"

	fs1.find()
	fs1[name[0]] = historia
	fs1[name[1]] = 0
	fs1[name[2]] = gestacion
	fs1[name[3]] = grupo
	fs1.search()

	var longitudTexto = 0;
	longitudTexto = f_texto.length;
	var posicionFinal = 0;
	posicionFinal = f_texto.indexOf("\n");
	var posicionInicial = 0;
	if (posicionFinal < 0){
		posicionFinal = f_texto.length
	}
	
	if (historia < 77200) {
		var kenter = f_texto.indexOf("\n");
		while (kenter > 0) {
			f_texto = f_texto.replace("\n", "");
			kenter = f_texto.indexOf("\n");
		}
	}
	var tamanio = 0;
	tamanio = fs1.getSize();
	
	//if (f_texto == '')
		//return
	
	if (tamanio > 0)
		fs1.deleteAllRecords()
	application.sleep(200)
	var lineas = Math.round(longitudTexto / 78);

	var resto = longitudTexto % 78;
	posicionFinal = 78;
	if (resto > 0)
		++lineas;
	var lineascab = 0;

	for (j = 1; j < lineas + 1; j++) {
		var vlarguito = f_texto.substr(posicionInicial, 78)
		if (vlarguito != '') {
			fs1.newRecord();
			fs1[name[0]] = historia
			fs1[name[1]] = 0
			fs1[name[2]] = gestacion
			fs1[name[3]] = grupo
			fs1[name[4]] = j;
			fs1[name[5]] = f_texto.substr(posicionInicial, 78);
			
			try{
				databaseManager.saveData(fs1.getSelectedRecord())
			}catch (msg){
				(plugins.dialogs.showInfoDialog("Prueba de error",msg.toString(),"ok"))
				//	application.output(msg.rhinoException.getMessage())
			}
			posicionInicial = posicionInicial + 78;
			++lineascab
		}
	}
}

/**
 * @param {number} historia
 * @param {number} gestacion
 * @param {number} grupo
 * 
 * @properties={typeid:24,uuid:"17A5A8D1-9D32-4B0C-BD47-C4DC07579215"}
 * @AllowToRunInFind
 */
function MostrarTextoCargadoOBSTXT(historia, gestacion, grupo) {
	var texto = '';
	var j = 0;
	
	var fs1 = databaseManager.getFoundSet("asistencial", "tbc_obstetritxt")
	var name = new Array()
	name[0] = "obstxt_hcl"
	name[1] = "obstxt_tipo"
	name[2] = "obstxt_gesta"
	name[3] = "obstxt_grupo"
	name[4] = "obstxt_secuencia"
	name[5] = "obstxt_linea"
	
	fs1.find()
	fs1[name[0]] = historia
	fs1[name[1]] = 0
	fs1[name[2]] = gestacion
	fs1[name[3]] = grupo
	fs1.search()
	
	var filasf = utils.stringToNumber(utils.stringTrim(fs1.getSize()))
	if (filasf > 0) {
		fs1.setSelectedIndex(1)
		texto = fs1[name[5]];
		for (j = 2; j < filasf + 1; j++) {
			fs1.setSelectedIndex(j)
			texto = texto + utils.stringTrim(fs1[name[5]]);
		}
	}
	return texto
}

/**
 * @param {string} str
 * @param {string} chars
 * 
 * @properties={typeid:24,uuid:"AB9D9C4B-61F3-45CE-87B8-D518B18A288C"}
 */
function trim(str, chars) {
	if (str != null)
		return ltrim(rtrim(str, chars), chars);
	else
		return ('')

}

/**
 * @param {string} str
 * @param {string} chars
 * 
 * @properties={typeid:24,uuid:"EDD44716-DE0F-41C4-B61A-939B8930353E"}
 */
function ltrim(str, chars) {
	if (str != null) {
		chars = chars || "\\s";
		return str.replace(new RegExp("^[" + chars + "]+", "g"), "");
	} else
		return ('')
}

/**
 * @param {string} str
 * @param {string} chars
 * 
 * @properties={typeid:24,uuid:"486306CB-6C46-4D25-95AD-F5C05E2CB23D"}
 */
function rtrim(str, chars) {
	if (str != null) {
		chars = chars || "\\s";
		return str.replace(new RegExp("[" + chars + "]+$", "g"), "");
	} else
		return ('')
}

/**
 * @param {String} campo
 * @param {String} tipo
 * @param {Number} longitud
 * @param {String} relleno
 *
 * @properties={typeid:24,uuid:"F8236318-CB4F-4FFA-B3AB-C2EB330E4E22"}
 */
function AjustoLongitudCampo(campo, tipo, longitud, relleno) {
	var valor
	
	if (tipo == "texto"){
		valor = (typeof valor == 'undefined') ? ' ': valor ;
	}else {
		valor = (typeof valor == 'undefined') ? '0': valor ;
		campo = campo.toString()
	}
	if (campo.length >= longitud){ 
		return campo.substr(0, longitud);
	}else{ 
		for (var i = 1; i < longitud - campo.length; i++){ 
			relleno += valor
		}
	}
	if(tipo == "texto"){
		return campo + relleno
	}else{
		return relleno + campo
	}
}

/**
 * @param {String} _form   name of the form
 * @param {String} _status you want to set it to (edit/browse)
 *
 * @properties={typeid:24,uuid:"2AAEFEE1-D656-497D-A7E9-9D5713AC18A6"}
 */
function setFieldsColorCustom(_form, _status) {
	var _type
	var _elements = forms[_form].elements.allnames
	var _color, _formTab

	var _jsForm = solutionModel.getForm('svy_nav_style')
	var _jsCForm = solutionModel.getForm(_form)

	if (_status == 'edit') {
		_color = _jsForm.getField('fld_bg_editMode').background
	} else {
		_color = _jsForm.getField('fld_bg_default').background
	}
	var _element
	var _style_color
	for (var i = 0; i < _elements.length; i++) {
		_element = _elements[i]
		try {
			_type = forms[_form].elements[_elements[i]].getElementType()
		} catch (e) {
			_type = null;
		}

		if ( (_type == 'TEXT_FIELD' ||
		_type == 'TEXT_AREA' ||
		_type == 'RTF_AREA' ||
		_type == 'HTML_AREA' ||
		_type == 'TYPE_AHEAD' ||
		_type == 'COMBOBOX' ||
		_type == 'RADIOS' ||
		_type == 'CALENDAR' ||
		_type == 'IMAGE_MEDIA' ||
		_type == 'PASSWORD') && (forms[_form].elements[_element].transparent != 1) && (forms[_form].elements[_element].enabled)) {
			if (_jsCForm.getField(_element) && _jsCForm.getField(_element).styleClass && _jsForm.getField('fld_bg_default$' + _jsCForm.getField(_element).styleClass) && _status != 'edit') {
				_style_color = _jsForm.getField('fld_bg_default$' + _jsCForm.getField(_element).styleClass).background
			} else if (_jsCForm.getField(_element) && _jsCForm.getField(_element).styleClass && _jsForm.getField('fld_bg_editMode$' + _jsCForm.getField(_element).styleClass) && _status == 'edit') {
				_style_color = _jsForm.getField('fld_bg_editMode$' + _jsCForm.getField(_element).styleClass).background
			} else {
				_style_color = _color
			}
			forms[_form].elements[_element].bgcolor = _style_color
		} else if (_type == 'TABPANEL' ) {
			for (var k = 1; k <= forms[_form].elements[_element].getMaxTabIndex(); k++) {	
				_formTab = forms[_form].elements[_element].getTabFormNameAt(k)
				if (_formTab && forms[_formTab]) {
					globals.setFieldsColorCustom(_formTab, _status)
				}
			}
		} else if (_type == 'SPLITPANE') {
			/** @type {Form} */
			var _formObj = forms[_form].elements[_element].getRightForm()
			_formTab = _formObj.controller.getName()
			if (_formTab && forms[_formTab]) {
				globals.setFieldsColorCustom(_formTab, _status)
			}
			_formObj = forms[_form].elements[_element].getLeftForm()
			_formTab = _formObj.controller.getName()
			if (_formTab && forms[_formTab]) {
				globals.setFieldsColorCustom(_formTab, _status)
			}
		}
	}
}

/**
 * @param {JSFoundset} relacion
 * @param {String} base
 * @param {String} tabla
 * 
 * @properties={typeid:24,uuid:"5A315364-557B-4A7B-9D9C-86A0C574ACA8"}
 */
function InicializarDatosDeRelacion(relacion, base, tabla) {
	var table = databaseManager.getTable(base, tabla)
	var columnNamesArray = table.getColumnNames()
	
	for (var i = 0; i < relacion.alldataproviders.length; i++) {
		var name = relacion.alldataproviders[i]
		var columnNames = table.getColumnNames()
		var firstColumnName = columnNamesArray[i]
		var jscolumn = table.getColumn(firstColumnName)
		if (jscolumn!=null){
			var columnLength = jscolumn.getLength() 
		
			relacion[firstColumnName] = 0
			var columnType = jscolumn.getType()
			if (columnType == 12){
				relacion[firstColumnName] = ' '
			}
		}
	}
}

/**
 * TODO generated, please specify type and doc for the params
 * @param relacion
 * @param base
 * @param tabla
 *
 * @properties={typeid:24,uuid:"828C5B23-10BD-43C2-9C53-B281F9863ECE"}
 */
function verValoresRelacion(relacion, base, tabla){
	var table = databaseManager.getTable(base, tabla)
	var columnNamesArray = table.getColumnNames()
	
	for (var i = 0; i < relacion.alldataproviders.length; i++) {
		var name = relacion.alldataproviders[i]
		var columnNames = table.getColumnNames()
		var firstColumnName = columnNamesArray[i]
		var jscolumn = table.getColumn(firstColumnName)
		if (jscolumn!=null){
			var columnLength = jscolumn.getLength() 
		
			application.output('columa:'+firstColumnName+' valor: '+relacion[firstColumnName])
			var columnType = jscolumn.getType()
			if (columnType == 12){
				application.output('columa:'+firstColumnName+' valor: '+relacion[firstColumnName] + "tipo 12 lo pone vacio")
			}
		}
	}
}



/**
 * @properties={typeid:24,uuid:"90227E12-1A55-4F7A-8515-019E9CDAA65D"}
 */
function FormatearHora1() {
		var hora
		var hora_aux = globals.vHora.toString()
		var longitud_hora = hora_aux.length
		switch (longitud_hora) {
		case 1:
			return hora = '0:0' + hora_aux;
			break;
		case 2:
			return hora = '0:' + hora_aux;
			break;
		case 3:
			return hora = '0' + hora_aux.substr(0, 1) + ':' + hora_aux.substr(1, 2);
			break;
		case 4:
			return hora = hora_aux.substr(0, 2) + ':' + hora_aux.substr(2, 2);
			break;
		case 5:
			return hora = '0' + hora_aux.substr(0, 1) + ':' + hora_aux.substr(1, 2) + ':' + hora_aux.substr(3, 2);
			break;
		case 6:
			return hora = hora_aux.substr(0, 2) + ':' + hora_aux.substr(2, 2) + ':' + hora_aux.substr(4, 2);
			break;
		case 7:
			return hora = '0' + hora_aux.substr(0, 1) + ':' + hora_aux.substr(1, 2) + ':' + hora_aux.substr(3, 2) + ':' + hora_aux.substr(5, 2);
			break;
		case 8:
			return hora = hora_aux.substr(0, 2) + ':' + hora_aux.substr(2, 2) + ':' + hora_aux.substr(4, 2) + ':' + hora_aux.substr(6, 2);
			break;
		default:
			return '0';
			break;
		}

}

/**
 * @properties={typeid:24,uuid:"87EF499E-640C-4088-B854-DA74361129D6"}
 */
function calculaDigitoVerificador() {
	var aux_dig = new Array(5);
	if(globals.vlargo==2){
		aux_dig[0] = 0
		aux_dig[1] = 0
		aux_dig[2] = 0
		aux_dig[3] = globals.vLega.toString().substr(0,1);
		aux_dig[4] = globals.vLega.toString().substr(1,1);
	}else{
		if (globals.vlargo==3){
			aux_dig[0] = 0
			aux_dig[1] = 0
			aux_dig[2] = globals.vLega.toString().substr(0,1);
			aux_dig[3] = globals.vLega.toString().substr(1,1);
			aux_dig[4] = globals.vLega.toString().substr(2,1);
		}else{
			if(globals.vlargo==4){
				aux_dig[0] = 0
				aux_dig[1] = globals.vLega.toString().substr(0,1);
				aux_dig[2] = globals.vLega.toString().substr(1,1);
				aux_dig[3] = globals.vLega.toString().substr(2,1);
				aux_dig[4] = globals.vLega.toString().substr(3,1);
			}else{
				if(globals.vlargo==5){
					aux_dig[0] = globals.vLega.toString().substr(0,1);
					aux_dig[1] = globals.vLega.toString().substr(1,1);
					aux_dig[2] = globals.vLega.toString().substr(2,1);
					aux_dig[3] = globals.vLega.toString().substr(3,1);
					aux_dig[4] = globals.vLega.toString().substr(4,1);
				}
			}
		}
	}
	var verificador = 0;
	verificador = utils.stringToNumber(aux_dig[1]) + utils.stringToNumber(aux_dig[2]) * 3 + utils.stringToNumber(aux_dig[3]) * 9 + utils.stringToNumber(aux_dig[4]) * 7;
	var larg = verificador.toString().length - 1;
	if(globals.digito_verificador!=verificador.toString().substr(larg,1)){
		globals.vDigVerif=false
	}

}
/**
 * @properties={typeid:24,uuid:"D235D11E-D1A6-4E07-ABAC-63E7C049CDD0"}
 */
function calculaDigitoVerificador_aux() {
	var aux_dig = new Array(5);
	if(globals.vlargo==2){
		aux_dig[0] = 0
		aux_dig[1] = 0
		aux_dig[2] = 0
		aux_dig[3] = globals.aux_Lega.toString().substr(0,1);
		aux_dig[4] = globals.aux_Lega.toString().substr(1,1);
	}else{
		if (globals.vlargo==3){
			aux_dig[0] = 0
			aux_dig[1] = 0
			aux_dig[2] = globals.aux_Lega.toString().substr(0,1);
			aux_dig[3] = globals.aux_Lega.toString().substr(1,1);
			aux_dig[4] = globals.aux_Lega.toString().substr(2,1);
		}else{
			if(globals.vlargo==4){
				aux_dig[0] = 0
				aux_dig[1] = globals.aux_Lega.toString().substr(0,1);
				aux_dig[2] = globals.aux_Lega.toString().substr(1,1);
				aux_dig[3] = globals.aux_Lega.toString().substr(2,1);
				aux_dig[4] = globals.aux_Lega.toString().substr(3,1);
			}else{
				if(globals.vlargo==5){
					aux_dig[0] = globals.aux_Lega.toString().substr(0,1);
					aux_dig[1] = globals.aux_Lega.toString().substr(1,1);
					aux_dig[2] = globals.aux_Lega.toString().substr(2,1);
					aux_dig[3] = globals.aux_Lega.toString().substr(3,1);
					aux_dig[4] = globals.aux_Lega.toString().substr(4,1);
				}
			}
		}
	}
	var verificador = 0;
	verificador = utils.stringToNumber(aux_dig[1]) + utils.stringToNumber(aux_dig[2]) * 3 + utils.stringToNumber(aux_dig[3]) * 9 + utils.stringToNumber(aux_dig[4]) * 7;
	var larg = verificador.toString().length - 1;
	if(globals.digito_verificador!=verificador.toString().substr(larg,1)){
		globals.vDigVerif=false
	}

}
/**
 * @properties={typeid:24,uuid:"B2BD9C0D-60CC-4367-9844-ED58ECEE7735"}
 */
function MuestroTextoProtocTxt(grupo, proto) {
	globals.txt_1 = globals.vNroProtocolo
	globals.txt_1g = 1
	/**
	globals.names_campos[0] = "anestxt_protocolo"
	globals.names_campos[1] = "anestxt_grupo"
	globals.names_campos[2] = "anestxt_nro1"
	globals.names_campos[3] = "anestxt_secuen"
	globals.names_campos[4] = "anestxt_linea"
	globals.names_campos[5] = "anestxt_tope"
	globals.names_campos[6] = "anestxt_filler"
	*/
    var names_campo = new Array()
    names_campo[0] = "protxt_protocolo"
	names_campo[1] = "protxt_grupo"
	names_campo[2] = "protxt_nro1"
	names_campo[3] = "protxt_secuen"
	names_campo[4] = "protxt_linea"
	names_campo[5] = "protxt_tope"
	names_campo[6] = "protxt_filler"
     
	frm_txt = "tbarchtxt"
	vServer = "asistencial"
	//globals.vTabla = "tbc_aneste_txt"	
	vTabla = "tbc_protoc_txt"
	//globals.names_relacion = 'vs_to_tbc_aneste_txt'
	names_relacion = 'vs2_to_tbc_protoc_txt'	
	
	globals.vGrupo2 = grupo
	globals.vNro2 = 1
	globals.on_Show_Texto_Protoc(frm_txt, names_campo,vServer, vTabla, names_relacion,proto)

}

/**
 * // TODO generated, please specify type and doc for the params
 * @param {Object} frm
 * @param {Object} names
 * @param {Object} server
 * @param {Object} tabla
 * @param {Object} relacion
 * @param {Object} campo1
 *
 * @properties={typeid:24,uuid:"397DB91E-5F56-4961-A2A9-7D6AD2BAB979"}
 */
function on_Show_Texto_Protoc(frm, names, server, tabla, relacion, campo1) {
	//plugins.dialogs.showInfoDialog("fs",relacion)
	//var vs2_to_tbc_protoc_txt;
	var name = new Array()
	name = names;
	var filas = 0
	if(vs2_to_tbc_protoc_txt.getSize()>0){
		filas=vs2_to_tbc_protoc_txt.getSize()
	}
	
	//var filas = foundset[relacion].getSize()
	globals[campo1] = '';
	if (filas > 0)
	{
		vs2_to_tbc_protoc_txt.setSelectedIndex(1)
		//foundset[relacion].setSelectedIndex(1)
		globals[campo1] = vs2_to_tbc_protoc_txt[name[4]];
	    //globals[campo1] = foundset[relacion][name[4]];
		for (var j=2;j<filas+1;j++)
 		{
 			vs2_to_tbc_protoc_txt.setSelectedIndex(j)
			//foundset[relacion].setSelectedIndex(j)
			if (vs2_to_tbc_protoc_txt.protxt_protocolo < 77200){
				globals[campo1] = globals[campo1] + '\n' + vs2_to_tbc_protoc_txt[name[4]];
			}
			  //  globals.txt_4 = globals.txt_4 + "\n" + foundset[relacion][name[4]];
			//}
			else{
			    //globals[campo1] = globals[campo1] + foundset[relacion][name[4]];
 			    globals[campo1] = globals[campo1] + vs2_to_tbc_protoc_txt[name[4]];
 			    //application.output(globals[campo1])
				//application.output(campo1)
			}    
		}
	}
}

/**
 * @properties={typeid:24,uuid:"015350AF-10ED-46C2-BF0F-794A0A181638"}
 */
function lleno_dataset_texto_bis() {
	var query = "select protxt_linea from tbc_protoc_txt where protxt_protocolo = ? and protxt_grupo = ? and protxt_nro1 = 1 ";
	var args = new Array();
	args[0]=globals.Nprotocolo_bis;
	args[1]=globals.grupo_texto_bis;
    globals.dataset_lineas_texto_bis = databaseManager.getDataSetByQuery("asistencial", query, args, 100);
    globals.filas_texto_bis = globals.dataset_lineas_texto_bis.getMaxRowIndex()

}

/**
 * @properties={typeid:24,uuid:"CA3316F3-8CBA-4B53-B7B5-826607C6398C"}
 * @AllowToRunInFind
 */
function printRoutine_bis(formname, rec) {
	var frm = formname;
	var oneRecord = rec;

	if(!oneRecord) 
	{
	    oneRecord = false
	}	

	if(!frm) return;
	forms[frm].controller.setPageFormat(210,297,10,10,10,10,1,0)
	//forms[frm].controller.showPrintPreview(oneRecord)
	//var destino = 'c:/temp/out'+utils.numberFormat(globals.numeroJobs,0)+'.pdf'
	//plugins.dialogs.showInfoDialog("",destino)
	//forms[frm].controller.print(false,false)
	
	//forms[frm].controller.print(false,false,plugins.pdf_output.getPDFPrinter())
	
	//combine muliple pdf docs into one.
	forms[frm].foundset.find()
	forms[frm].foundset['tmp_frm']=globals.vfrmActual
	forms[frm].foundset['tmp_hiscli']=globals.vHiscli
	forms[frm].foundset['tmp_protocolo']=globals.vNroProtocolo
	forms[frm].foundset['tmp_operador']=globals.vLega
	forms[frm].foundset['tmp_fecha']=globals.vFechaActual
	forms[frm].foundset['tmp_hora']=globals.vHoraCarga
	forms[frm].foundset.search()
	
	forms[frm].controller.print(oneRecord,false)
}

/**
 * @properties={typeid:24,uuid:"DDEFA643-3834-4336-B501-0E94D3D8263F"}
 * @AllowToRunInFind
 */
function BuscarSeguri() {
	globals.vBuscarSeguriProcesos=''
	globals.vSeguquiOk=true
	var query = "select * from tbc_seguqui_new where SegTipoHc = 0 and SegHistClinica = ? and SegProtocolo = 0 ";
    var args = new Array();
    args[0]=globals.vHiscli;
    var dataset = new Array();
    dataset = databaseManager.getDataSetByQuery("asistencial", query, args, 1);
    //var filas = dataset.getMaxRowIndex()
	var fs2 = databaseManager.getFoundSet("asistencial","tbc_seguqui_new")
	fs2.find()
	fs2['segtipohc']=0
	fs2['seghistclinica']=globals.vHiscli
	fs2['segprotocolo']=0
	fs2.search(true)
	//if(fs2['segciruiden']==0||fs2['segcirculbanio']==0||fs2['segcirculmate']==0||fs2['segcirculhiscli']==0||fs2['segcirculestu']==0||fs2['segcirculprote']==0||fs2['segcirculconsen']==0||fs2['segadmindiag']==0||fs2['seglegacirculini']==0){
	if(dataset.getMaxRowIndex()>0){
		if(dataset.getValue(1,14)==0||dataset.getValue(1,15)==0||dataset.getValue(1,16)==0||dataset.getValue(1,17)==0||dataset.getValue(1,18)==0||dataset.getValue(1,19)==0||dataset.getValue(1,20)==0||dataset.getValue(1,10)==0||dataset.getValue(1,21)==0){
			globals.vBuscarSeguriProcesos+="Falta segcirculident -> "+dataset.getValue(1,14)+"- segcirculbanio ->"+dataset.getValue(1,15)+"- segcirculmate-> "+dataset.getValue(1,16)+" - segcirculhiscli ->"+dataset.getValue(1,17)+" - segcirculestu->"+dataset.getValue(1,18)+ " - segcirculprote->"+dataset.getValue(1,19)+" - segcirculconsen-> "+dataset.getValue(1,20)+" - segadmindiag-> "+dataset.getValue(1,10)+" - seglegacirculini-> "+dataset.getValue(1,21)+'\n'
			globals.vSeguquiOk=false
		}
		if(dataset.getValue(1,23)==0||dataset.getValue(1,24)==0||dataset.getValue(1,25)==0||dataset.getValue(1,26)==0||dataset.getValue(1,28)==0||dataset.getValue(1,29)==0||dataset.getValue(1,30)==0||dataset.getValue(1,31)==0||dataset.getValue(1,62)==0||dataset.getValue(1,63)==0||dataset.getValue(1,64)==0){
			globals.vBuscarSeguriProcesos+="Falta seganestident -> "+dataset.getValue(1,23)+" -seganestpulso-> "+dataset.getValue(1,24)+" -seganestseguri->"+dataset.getValue(1,25)+" -seganestviaaerea-> "+dataset.getValue(1,28)+" -seganestacceso-> "+dataset.getValue(1,29)+" -seganestsangre-> "+dataset.getValue(1,30)+" -seganestocular-> "+dataset.getValue(1,62)+" -seganestdecubi-> "+dataset.getValue(1,63)+" -seglegaanestini-> "+dataset.getValue(1,31)+" -seganestcomorb-> "+dataset.getValue(1,64)+'\n'
			globals.vSeguquiOk=false
		}
		if(dataset.getValue(1,33)==0||dataset.getValue(1,34)==0||dataset.getValue(1,35)==0||dataset.getValue(1,36)==0||dataset.getValue(1,37)==0){
			globals.vBuscarSeguriProcesos+="Falta segciruident -> "+dataset.getValue(1,33)+" -segciruantibiot-> "+dataset.getValue(1,34)+" segcirubisturi->"+dataset.getValue(1,35)+" -segciruincidentes-> "+dataset.getValue(1,36)+" -seglegaciruini-> "+dataset.getValue(1,37)+'\n'
			globals.vSeguquiOk=false
		}
		if(dataset.getValue(1,39)==0||dataset.getValue(1,42)==0||dataset.getValue(1,43)==0||dataset.getValue(1,44)==0||dataset.getValue(1,40)==0||dataset.getValue(1,45)==0){
			globals.vBuscarSeguriProcesos+="Falta seganestrepasaini -> "+dataset.getValue(1,39)+" -seginstrurepasaini-> "+dataset.getValue(1,42)+" -seginstrugasasini-> "+dataset.getValue(1,43)+" -seginstrupinzasini-> "+dataset.getValue(1,44)+" -seglegaanestrepi-> "+dataset.getValue(1,40)+" -seglegainstruini-> "+dataset.getValue(1,45)+'\n'
			globals.vSeguquiOk=false
		}
		if(dataset.getValue(1,69)==0||dataset.getValue(1,70)==0||dataset.getValue(1,71)==0||dataset.getValue(1,72)==0||dataset.getValue(1,73)==0||dataset.getValue(1,74)==0||dataset.getValue(1,75)==0){
			globals.vBuscarSeguriProcesos+="Falta segcirculequipres-> "+dataset.getValue(1,69)+" -segcirculequifunc-> "+dataset.getValue(1,70)+" -segcirculidsipr-> "+dataset.getValue(1,71)+" -segcirculdecubi-> "+dataset.getValue(1,72)+" -segcirculimprev->"+dataset.getValue(1,73)+" -segcirculanesproblema-> "+dataset.getValue(1,74)+" -seglegacirculcut-> "+dataset.getValue(1,75)+'\n'
			globals.vSeguquiOk=false
		}
	}else{
		globals.vBuscarSeguriProcesos+="No hay registro de Seguridad Quirúrgica cargado."
		globals.vSeguquiOk=false
	}
}

/**
 * @properties={typeid:24,uuid:"ABBD0242-38BC-4639-AB23-6B842DC3BE11"}
 */
function Ver_hcir_ocu() {
	globals.vHcirOcu=false
	/*
	var query = "select * from tbc_hcir_ocu";
    var dataset = new Array();
    dataset = databaseManager.getDataSetByQuery("asistencial", query, null, 1);
    var hc_encontrada=false
	
    for (var i=1;i<=20;i++){
    	if(globals.vHiscli==dataset.getValue(1,i)){
    		hc_encontrada=true
    	}
	}
    if (!hc_encontrada){
    	for(var j=1;j<=20&&dataset.getValue(1,j)!=0;j++){}
    	if(j>20){
    		plugins.dialogs.showInfoDialog("J>20","Error J > 20")
    	}else{
    		var k=20-j+1
    		var query2="update tbc_hcir_ocu set hcir_histclin_"+k+" = "+globals.vHiscli
			var done = plugins.rawSQL.executeSQL("asistencial", "tbc_hcir_ocu", query2, null)
			if (done) {
				//flush is required when changes are made in db
				plugins.rawSQL.flushAllClientsCache("asistencial", "tbc_hcir_ocu")
			} else {
				var msg = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
				plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg, 'Ok')
			}
			
    	}
    //}else{
    	//plugins.dialogs.showErrorDialog("hcir-ocu","hc tomada por otro usuario", "Ok")
		
    }
    */
    var done0 = plugins.rawSQL.executeSQL("parametros", "hcirocu", "begin; lock table hcirocu in row exclusive mode;")
	if (!done0) {
		var msg0 = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
		plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg0, 'Ok')
	}
	var done1 = plugins.rawSQL.executeSQL("parametros", "hcirocu", "select * from hcirocu where hiscli = "+globals.vHiscli+" for update;")
	if (done1) {
		var vQuery = " SELECT * FROM hcirocu WHERE hiscli = "+globals.vHiscli;
		var vDataset = databaseManager.getDataSetByQuery("parametros", vQuery, null, 1);
		if (vDataset.getMaxRowIndex()>0){
			globals.vHcirOcu=true
			plugins.rawSQL.executeSQL("parametros", "hcirocu", "end;")
			plugins.dialogs.showErrorDialog('Historia Clinica Tomada', 'Historia Clinica tomada en: '+vDataset.getValue(1,3)+' '+vDataset.getValue(1,2) , 'Ok')
		}else{
			var done2 = plugins.rawSQL.executeSQL("parametros", "hcirocu", "insert into hcirocu values ("+globals.vHiscli+", '"+application.getIPAddress().toString()+"', 'IP'); commit;")
			if (!done2) {
				var msg1 = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
				plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg1, 'Ok')
			}
			
		}
	}else{
		plugins.rawSQL.executeSQL("parametros", "hcirocu", "end;")
		plugins.dialogs.showErrorDialog('Error', 'Error en Select for update' , 'Ok')
	}

}

/**
 * @properties={typeid:24,uuid:"F309F30A-E711-4D3D-83B1-F67B3D2AE443"}
 */
function DeslocHcir() {
	globals.vHcirOcu=false
	/*
	var query = "select * from tbc_hcir_ocu";
    var dataset = new Array();
    dataset = databaseManager.getDataSetByQuery("asistencial", query, null, 1);
    var hc_encontrada=false
	for (var i=1;i<=20&&globals.vHiscli!=dataset.getValue(1,i);i++){}
    if (globals.vHiscli==dataset.getValue(1,i)){
    	var k=20-i+1
    	var query2="update tbc_hcir_ocu set hcir_histclin_"+k+" = 0"
			var done = plugins.rawSQL.executeSQL("asistencial", "tbc_hcir_ocu", query2, null)
			if (done) {
				//flush is required when changes are made in db
				plugins.rawSQL.flushAllClientsCache("asistencial", "tbc_hcir_ocu")
			} else {
				var msg = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
				plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg, 'Ok')
			}
			
    }
    */
    var done0 = plugins.rawSQL.executeSQL("parametros", "hcirocu", "begin; lock table hcirocu in row exclusive mode;")
	if (!done0) {
		var msg0 = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
		plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg0, 'Ok')
	}
	var done1 = plugins.rawSQL.executeSQL("parametros", "hcirocu", "select * from hcirocu where hiscli = "+globals.vHiscli+" for update;")
	if (done1) {
		var vQuery = " SELECT * FROM hcirocu WHERE hiscli = "+globals.vHiscli;
		var vDataset = databaseManager.getDataSetByQuery("parametros", vQuery, null, 1);
		if (vDataset.getMaxRowIndex()>0){
			var done2 = plugins.rawSQL.executeSQL("parametros", "hcirocu", "delete from hcirocu where hiscli = "+globals.vHiscli+"; commit;")
			if (!done2) {
				var msg1 = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
				plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg1, 'Ok')
			}
		}else{
			plugins.rawSQL.executeSQL("parametros", "hcirocu", "end;")
			plugins.dialogs.showErrorDialog('No Existe', 'Historia Clinica '+globals.vHiscli+' no existe en tabla Postgres hcirocu' , 'Ok')
						
		}
	}else{
		plugins.rawSQL.executeSQL("parametros", "hcirocu", "end;")
		plugins.dialogs.showErrorDialog('Error', 'Error en Select for update' , 'Ok')
	}

}

/**
 * @properties={typeid:24,uuid:"ED1B4429-B8E2-43B1-A791-29F73B5558E7"}
 * @AllowToRunInFind
 */
function printRoutine5(formname, rec) {
	var frm = formname;
	var oneRecord = rec;

	if(!oneRecord) 
	{
	    oneRecord = false
	}	

	if(!frm) return;
	forms[frm].controller.setPageFormat(210,297,10,10,10,10,1,0)
	//forms[frm].controller.showPrintPreview(oneRecord)
	//var destino = 'c:/temp/out'+utils.numberFormat(globals.numeroJobs,0)+'.pdf'
	//plugins.dialogs.showInfoDialog("",destino)
	//forms[frm].controller.print(false,false)
	
	
	
	//combine muliple pdf docs into one.
	forms[frm].foundset.find()
	forms[frm].foundset['tipo']='talon-3'
	forms[frm].foundset.search()
	
	forms[frm].controller.print(true,false)
	//forms[frm].controller.print(false,false,plugins.pdf_output.getPDFPrinter())
}

/**
 * @properties={typeid:24,uuid:"0A40C8A1-0F44-4A95-A800-78402B7CEC93"}
 */
function CapturaFechaSistema() {
	var fechaSistema=application.getServerTimeStamp()
	var anio = fechaSistema.getFullYear()
	var mes = fechaSistema.getMonth()+1
	var dia = fechaSistema.getDate()
	var mes_ed
	var dia_ed
	if(mes>9){
		mes_ed = mes
	}else{
		mes_ed='0'+mes
	}
	if(dia>9){
		dia_ed=dia
	}else{
		dia_ed='0'+dia
	}
	return anio+''+mes_ed+''+dia_ed
}

/**
 *  @param {String} tipo
 * @properties={typeid:24,uuid:"11F8FC9C-BEF5-4F92-8549-B527432E556F"}
 */
function CapturaHoraSistema(tipo) {
	var horaSistema=application.getServerTimeStamp()
	var hora = utils.stringToNumber(horaSistema.getHours().toString())
	var hora_ed
	if (hora>9){
		hora_ed=hora
	}else{
		hora_ed='0'+hora
	}
	var minutos = utils.stringToNumber(horaSistema.getMinutes().toString())
	var minutos_ed
	if(minutos>9){
		minutos_ed=minutos
	}else{
		minutos_ed='0'+minutos
	}
	var segundos =utils.stringToNumber(horaSistema.getSeconds().toString())
	var segundos_ed
	if (segundos < 10){
		segundos_ed='0'+segundos
	}else{
		segundos_ed=segundos
	}
	var milisegundos = utils.stringToNumber(horaSistema.getUTCMilliseconds().toString())
	var mili_ed
	if(milisegundos<10){
		mili_ed="0"+milisegundos
	}else{
		mili_ed=milisegundos.toString().substr(0,2)
	}
	var retorno
	switch (tipo){
		case "HHMM":retorno=hora_ed+''+minutos_ed;break;
		case "HHMMSS":retorno=hora_ed+''+minutos_ed+''+segundos_ed;break;
		case "HHMMSSDD":retorno=hora_ed+''+minutos_ed+''+segundos_ed+''+mili_ed;break;
	}
	return retorno
}

/**
 * @properties={typeid:24,uuid:"3F84A3E8-2C23-47CB-BD37-4802882D120A"}
 */
function Ver_Bandeja_Ciru() {
	globals.vBandejaCiru=false
	
    var done0 = plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "begin; lock table bandeja_ciru in share row exclusive mode;")
	if (!done0) {
		var msg0 = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
		plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg0, 'Ok')
	}
	var done1 = plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "select * from bandeja_ciru where hiscli = "+globals.vHiscli+" for update;")
	if (done1) {
		var vQuery = " SELECT * FROM bandeja_ciru WHERE hiscli = "+globals.vHiscli;
		var vDataset = databaseManager.getDataSetByQuery("parametros", vQuery, null, 1);
		if (vDataset.getMaxRowIndex()>0){
			globals.vBandejaCiru=true
			plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "end;")
			plugins.dialogs.showErrorDialog('Historia Clinica Tomada', 'Historia Clinica tomada en: '+vDataset.getValue(1,3)+' '+vDataset.getValue(1,2) , 'Ok')
		}else{
			var done2 = plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "insert into bandeja_ciru values ("+globals.vHiscli+", '"+application.getIPAddress().toString()+"', 'IP'); commit;")
			if (!done2) {
				var msg1 = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
				plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg1, 'Ok')
			}
		}
	}else{
		plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "end;")
		plugins.dialogs.showErrorDialog('Error', 'Error en Select for update' , 'Ok')
	}
}

/**
 * @properties={typeid:24,uuid:"34D7C41A-0C6F-4B49-949A-6A6AE614EE85"}
 */
function Desloc_Bandeja_Ciru() {
	globals.vBandejaCiru=false
	
    var done0 = plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "begin; lock table bandeja_ciru in row exclusive mode;")
	if (!done0) {
		var msg0 = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
		plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg0, 'Ok')
	}
	var done1 = plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "select * from bandeja_ciru where hiscli = "+globals.vHiscli+" for update;")
	if (done1) {
		var vQuery = " SELECT * FROM bandeja_ciru WHERE hiscli = "+globals.vHiscli;
		var vDataset = databaseManager.getDataSetByQuery("parametros", vQuery, null, 1);
		if (vDataset.getMaxRowIndex()>0){
			var done2 = plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "delete from bandeja_ciru where hiscli = "+globals.vHiscli+"; commit;")
			if (!done2) {
				var msg1 = plugins.rawSQL.getException().getMessage(); //see exception node for more info about the exception obj
				plugins.dialogs.showErrorDialog('Error', 'SQL exception: ' + msg1, 'Ok')
			}
		}else{
			plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "end;")
			plugins.dialogs.showErrorDialog('No Existe', 'Historia Clinica '+globals.vHiscli+' no existe en tabla Postgres bandeja_ciru' , 'Ok')
						
		}
	}else{
		plugins.rawSQL.executeSQL("parametros", "bandeja_ciru", "end;")
		plugins.dialogs.showErrorDialog('Error', 'Error en Select for update' , 'Ok')
	}

}

/**
 *  @param {Date} FechaHoraA
 *  @param {Date} FechaHoraB
 * @properties={typeid:24,uuid:"2B4C9642-DDFE-40DA-B062-E5C2B27747AA"}
 */
function FechaHoraAmayorB(FechaHoraA, FechaHoraB) {
	/*
	var anioA=FechaHoraA.getFullYear()
	var mesA=FechaHoraA.getMonth()+1
	var diaA=FechaHoraA.getDate()
	var horaA=FechaHoraA.getHours()
	var minutosA=FechaHoraA.getMinutes()
	if(mesA<10){
		mesA='0'+ mesA
	}
	if(diaA<10){
		diaA='0'+diaA
	}
	if(horaA<10){
		horaA='0'+ horaA
	}
	if(minutosA<10){
		minutosA='0'+minutosA
	}
	var FechaA=utils.stringToNumber(anioA+''+mesA+''+diaA)
	var HoraA=utils.stringToNumber(horaA+''+minutosA)
	var anioB=FechaHoraB.getFullYear()
	var mesB=FechaHoraB.getMonth()+1
	var diaB=FechaHoraB.getDate()
	var horaB=FechaHoraB.getHours()
	var minutosB=FechaHoraB.getMinutes()
	if(mesB<10){
		mesB='0'+ mesB
	}
	if(diaB<10){
		diaB='0'+diaB
	}
	if(horaB<10){
		horaB='0'+ horaB
	}
	if(minutosB<10){
		minutosB='0'+minutosB
	}
	var FechaB=utils.stringToNumber(anioB+''+mesB+''+diaB)
	var HoraB=utils.stringToNumber(horaB+''+minutosB)
	/*
	if(FechaA>FechaB){
		return true
	}else{
		if(FechaA==FechaB){
			if(HoraA>HoraB){
				return true
			}else{
				return false
			}
		}else{
			return false
		}
	}
	*/
	if(FechaHoraA>FechaHoraB){
		return true
	}else{
		return false
	}
}

/**
 *  @param {Date} FechaHoraA
 *  @param {Date} FechaHoraB
 * @properties={typeid:24,uuid:"A3EB1E00-C420-45F0-B8F3-4B0A501343B9"}
 */
function Contar_mes(FechaHoraA, FechaHoraB) {
	// El hasta dede ser mayor al desde
	var aa_desde = FechaHoraA.getFullYear()
	var mm_desde = FechaHoraA.getMonth() +1
	var aa_hasta = FechaHoraB.getFullYear()
	var mm_hasta = FechaHoraB.getMonth() +1
	var contar	
	
	if(mm_hasta <= mm_desde){
		contar = (mm_hasta + 13) - mm_desde
		contar = contar + ((aa_hasta - aa_desde) - 1) * 12 
	}else{
		contar = (mm_hasta + 1) - mm_desde
		contar = contar + ((aa_hasta - aa_desde)) * 12
	}
	
	return contar
	
}

/**
 * @param Fecha_Desde
 * @param Fecha_Hasta
 *
 * @properties={typeid:24,uuid:"F6B8EE08-EB51-4E0B-A9DA-29F2AF781B6C"}
 */
function Contar_dias(Fecha_Desde, Fecha_Hasta) {
	// El hasta dede ser mayor al desde
	var $contar = 0	
	var hoy = new Date
	var $fecha_hasta = DateToInteger(Fecha_Hasta)// fecha hasta en numérico
	hoy = DateToInteger(hoy)// fecha hoy en numérico
	
	var $x = Fecha_Hasta - Fecha_Desde//diferencias entre dos dias y lo muestra en milisegundos 
    var $un_dia=1000*60*60*24         //ms * sec * min * hrs de un día
    var $dif_dias = $x / $un_dia      //calcula la diferencia en días 
    $contar = Math.ceil($dif_dias )   //redondea
    if ($contar > 0){
	    if ($fecha_hasta == hoy){
	        $contar--                 //se resta un día cuando la fecha hasta es = fecha del sistema 
	    }
	}
	
	return $contar	
}

/**
 * @param mes
 *
 * @properties={typeid:24,uuid:"E26D1774-88B7-47AF-8641-CEA841009DB2"}
 */
function Traer_nom_mes(mes) {
	var nom_mes
	var nombres_meses = new Array()
	nombres_meses.push('      Enero        ')
	nombres_meses.push('     Febrero       ')
	nombres_meses.push('      Marzo        ')
	nombres_meses.push('      Abril        ')
	nombres_meses.push('      Mayo         ')
	nombres_meses.push('      Junio        ')
	nombres_meses.push('      Julio        ')
	nombres_meses.push('     Agosto        ')
	nombres_meses.push('    Septiembre     ')
	nombres_meses.push('     Octubre       ')
	nombres_meses.push('    Noviembre      ')
	nombres_meses.push('    Diciembre      ')
	
	nom_mes = nombres_meses[mes]
	return nom_mes
}

/**
 * @param mes
 *
 * @properties={typeid:24,uuid:"C5A5156B-D051-4823-AFB4-547B7D09A538"}
 */
function Traer_nom_mes_corto(mes) {
	var nom_mes
	var nombres_meses = new Array()
	nombres_meses.push('Enero')
	nombres_meses.push('Febr.')
	nombres_meses.push('Marzo')
	nombres_meses.push('Abril')
	nombres_meses.push('Mayo ')
	nombres_meses.push('Junio')
	nombres_meses.push('Julio')
	nombres_meses.push('Agos.')
	nombres_meses.push('Sep. ')
	nombres_meses.push('Oct. ')
	nombres_meses.push('Nov. ')
	nombres_meses.push('Dic. ')
	
	nom_mes = nombres_meses[mes]
	return nom_mes
}

/**
 * @properties={typeid:24,uuid:"F66E81CD-9ED4-42FE-B0F4-9F8BF4DE72F8"}
 */
function CalcularCuil(cuil) {
	var vector_cuil = new Array()
	vector_cuil[0]=cuil.toString().substr(0,1)
	vector_cuil[1]=cuil.toString().substr(1,1)
	vector_cuil[2]=cuil.toString().substr(2,1)
	vector_cuil[3]=cuil.toString().substr(3,1)
	vector_cuil[4]=cuil.toString().substr(4,1)
	vector_cuil[5]=cuil.toString().substr(5,1)
	vector_cuil[6]=cuil.toString().substr(6,1)
	vector_cuil[7]=cuil.toString().substr(7,1)
	vector_cuil[8]=cuil.toString().substr(8,1)
	vector_cuil[9]=cuil.toString().substr(9,1)
	
	var vector_aux =new Array(5, 4, 3, 2, 7, 6, 5, 4, 3, 2)
	var acum_aux=0
	for (var i=0;i<10;i++){
		acum_aux = acum_aux + (vector_cuil[i] * vector_aux[i])
	}
	var resto = acum_aux % 11;
	var digito_verif=0
	if (resto==0){
		digito_verif=resto
	}else{
		digito_verif=11 - resto;
	}
	var cuil_calculado = cuil.toString().substr(0,10)+digito_verif
	if(cuil==utils.stringToNumber(cuil_calculado)){
		return true
	}else{
		return false
	}
}

/**
 *  @param {number} fecha_efec
 * 
 * @properties={typeid:24,uuid:"55CC2085-045D-4F28-80DE-D3FFFD8630AD"}
 */
function CalculaAntiguedad(fecha_efec) {
	var final_mes = new Array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
	var fecha_aux1 = fecha_efec.toString()
	var anio_efec = utils.stringToNumber(fecha_aux1.substr(0,4))
	var mes_efec = utils.stringToNumber(fecha_aux1.substr(4,2))
	var dia_efec = utils.stringToNumber(fecha_aux1.substr(6,2))
	var fecha_actual = new Date();
	fecha_actual = application.getServerTimeStamp()
	var anio_actual = fecha_actual.getFullYear();
	var antig_meses=0
	var resto = anio_actual % 4;
	if (resto == 0) final_mes[1] = 29;
	var antig_anios = fecha_actual.getFullYear() - anio_efec;
	if (antig_anios != 0) {
		if ((fecha_actual.getMonth()+1) < mes_efec) {
			--antig_anios;
			antig_meses=(fecha_actual.getMonth()+1)+12-mes_efec
		} else {
			if ((fecha_actual.getMonth()+1) == mes_efec) {
				if (fecha_actual.getDate() < dia_efec) {
					--antig_anios;
					antig_meses=11
				}
			}else{
				antig_meses=(fecha_actual.getMonth()+1)-mes_efec
			}
		}
	} else {
		if ((fecha_actual.getMonth()+1) < mes_efec) {
			antig_meses=(fecha_actual.getMonth()+1)+12-mes_efec
		} else {
			if ((fecha_actual.getMonth()+1) == mes_efec) {
				
						antig_meses=0
				
			}else{
				antig_meses=(fecha_actual.getMonth()+1)-mes_efec
			}
		}
	}
	return (antig_anios*100)+antig_meses
}
/** 
 * @param periodo
 *
 * @properties={typeid:24,uuid:"AE622601-16A8-4496-B7D5-68357F3D9A45"}
 */
function Ultimo_dia_mes(periodo){
	var final_mes = new Array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
	var $anio = utils.stringToNumber(periodo.toString().substr(0,4))	
	var $mes  = utils.stringToNumber(periodo.toString().substr(4,2)) - 1 
	var $resto = $anio % 4;
	if ($resto == 0) final_mes[1] = 29;
	return final_mes[$mes]
	
}

/**
 * TODO generated, please specify type and doc for the params
 * @param {Date} date
 * @param {Boolean} fullName
 *
 * @properties={typeid:24,uuid:"CC93A519-ED6F-428A-BC5E-801B6B846E02"}
 */
function getMonthName(date,fullName){
	
	var month = "";
	
	if(fullName){
		
		switch(date.getMonth()){
			case 0 :
				month = "Enero";
				break;
			case 1 :
				month = "Febrero";
				break;
			case 2 :
				month = "Marzo";
				break;
			case 3 :
				month = "Abril";
				break;
			case 4 :
				month = "Mayo";
				break;
			case 5 :
				month = "Junio";
				break;
			case 6 :
				month = "Julio";
				break;
			case 7 :
				month = "Agosto";
				break;
			case 8 :
				month = "Septiembre";
				break;
			case 9 :
				month = "Octubre";
				break;
			case 10 :
				month = "Noviembre";
				break;
			case 11 :
				month = "Diciembre";
				break;
			default:
				month = "";
				break;
		}
	}
	else{
		
		switch(date.getMonth()){
			case 0 :
				month = "Ene";
				break;
			case 1 :
				month = "Feb";
				break;
			case 2 :
				month = "Mar";
				break;
			case 3 :
				month = "Abr";
				break;
			case 4 :
				month = "May";
				break;
			case 5 :
				month = "Jun";
				break;
			case 6 :
				month = "Jul";
				break;
			case 7 :
				month = "Ago";
				break;
			case 8 :
				month = "Sep";
				break;
			case 9 :
				month = "Oct";
				break;
			case 10 :
				month = "Nov";
				break;
			case 11 :
				month = "Dic";
				break;
			default:
				month = "";
				break;
		}
	}
	
	return month;
}

/**
 * TODO generated, please specify type and doc for the params
 * @param {Date} date
 * @param {Boolean} fullName
 *
 * @properties={typeid:24,uuid:"4C2B83F5-5351-4C5A-8C38-DD58D0E57569"}
 */
function getDayName(date,fullName){
	
	var day = "";
	
	if(fullName){
		
		switch(date.getDay()){
			case 0 :
				day = "Domingo";
				break;
			case 1 :
				day = "Lunes";
				break;
			case 2 :
				day = "Martes";
				break;
			case 3 :
				day = "Miercoles";
				break;
			case 4 :
				day = "Jueves";
				break;
			case 5 :
				day = "Viernes";
				break;
			case 6 :
				day = "Sábado";
				break;
			default:
				day = "";
				break;
		}
	}
	else{
		
		switch(date.getDay()){
			case 0 :
				day = "Do";
				break;
			case 1 :
				day = "Lu";
				break;
			case 2 :
				day = "Ma";
				break;
			case 3 :
				day = "Mi";
				break;
			case 4 :
				day = "Ju";
				break;
			case 5 :
				day = "Vi";
				break;
			case 6 :
				day = "Sa";
				break;
			default:
				day = "";
				break;
		}
	}
	
	return day;
}

/**
 * Genera reporte en base al diseñador de Jasper Report
 * 
 * @param {JSDataSet} dataSource
 * @param {String} fileNameJasper
 * @param {String} fileNameReport
 * @param {String} outPutFormat
 * @param {Object} parameters
 *
 * @return {String}
 * @properties={typeid:24,uuid:"0AA52078-53AC-4D30-B08F-4F7602872529"}
 */
function GenerarReporte_jaspertPlugin(dataSource,fileNameJasper,fileNameReport,outPutFormat,parameters) {
	
	var absoluteFileName = '';
	
	if(dataSource.getMaxRowIndex() > 0){
		
	    var fileName = fileNameReport + '.' + outPutFormat.toLowerCase();
		var arch = plugins.file.createFile(fileName);
		if(arch){
			
			absoluteFileName = arch.getAbsoluteFile();
			
			try{
				
				//plugins.jasperPluginRMI.compileReport(fileNameJasper + ".jrxml");
				plugins.jasperPluginRMI.runReport(dataSource,fileNameJasper + ".jasper", absoluteFileName,outPutFormat,parameters);
			}
			catch(ex){
				absoluteFileName = '';
				globals.DIALOGS.showWarningDialog("¡Atención!","Error, GenerarReporte_jaspertPlugin.\n" + ex.message,"Aceptar");
			}
		}
		else
			globals.DIALOGS.showWarningDialog("¡Atención!","Error, GenerarReporte_jaspertPlugin, plugins.file.createFile " + fileNameReport,"Aceptar");
	}
	
	return absoluteFileName;
}


/**
 * Genera reporte PDF en base al diseñador de Servoy
 * 
 * @param {String} formName
 * @param {String} fileNameReport
 *
 * @return {String}
 * @properties={typeid:24,uuid:"2EBDB3CE-4AAB-4505-A255-C698D2F1600B"}
 */
function GenerarReporte_servoyPDF(formName,fileNameReport) {
	
	var absoluteFileName = '';
	
	if(utils.stringTrim(formName).length > 0){
		
	    var fileName = fileNameReport + '.pdf';
		var arch = plugins.file.createFile(fileName);
		//var absoluteFileNamep = arch.getAbsoluteFile();
		if(arch){
			
			absoluteFileName = arch.getAbsolutePath();
			try{
			
				forms[formName].controller.print(false,false,plugins.pdf_output.getPDFPrinter(absoluteFileName));
			}
			catch (ex) {
				
				absoluteFileName = '';
				globals.DIALOGS.showWarningDialog("¡Atención!","Error, GenerarReporte_servoyPDF.\n" + ex.message,"Aceptar");
			}
			
		}
		else
			globals.DIALOGS.showWarningDialog("¡Atención!","Error GenerarReporte_servoyPDF, plugins.file.createFile " + fileNameReport,"Aceptar");
	}
	
	return absoluteFileName;
}

/**
 * Copia archivos al Servidor de prueba u operativo, luego elimina el archivo temporal creado en el cliente
 * uploadFolder : nombre del archivo destino '/nombre de carpeta'
 * absoluteFileName : ruta completa del archivo a copiar
 * 
 * @param {String} uploadFoder
 * @param {String} absoluteFileName
 *
 * @return {Boolean}
 * @properties={typeid:24,uuid:"E0107780-014B-4FC2-8FAC-B4A68835A872"}
 */
function CopiarArchivoAServidor (uploadFoder,absoluteFileName) {
	
	var result = false;
	var largo_url = application.getServerURL().length
	if (largo_url < 24){
		
		// Ambiente local desarrollador
		result = true;
	}
	else{
		
		// Ambiente servidor de prueba o operativo
		if(uploadFoder.length > 0){
			
			var vDirServer = '';
			var url = application.getServerURL().substr(0,23)
			var puerto = url.split(':');
			
			if(puerto[2]!='8080'){
				
				// Ambiente de pruebas
				vDirServer='/app/servoyd/application_server/server/webapps/ROOT/uploads' + uploadFoder;
			}
			else{
				
				// Ambiente operativo
				vDirServer='/app/servoy/application_server/server/webapps/ROOT/uploads' + uploadFoder;
			}
			
			var register = plugins.UserManager.register( "Hypertelia", "q9SA5eCyb085cvATVO8s9onGe3iBzJyCTel8Y7J72BuG599wodOiU5OL26/pkKyv" );
			if(register){
				
				var copy = plugins.UserManager.copyFileToServer(absoluteFileName,vDirServer,true);
				if(copy)
					result = true;
				else
					globals.DIALOGS.showWarningDialog("¡Atención!","Error CopiarArchivoAServidor, plugins.UserManager.copyFileToServer " + absoluteFileName,"Aceptar");
			}
			else
				globals.DIALOGS.showWarningDialog("¡Atención!","Error CopiarArchivoAServidor, plugins.UserManager.register " + absoluteFileName,"Aceptar");
			
			if(!plugins.file.deleteFile(absoluteFileName))
				globals.DIALOGS.showInfoDialog("¡Atención!","No se borro archivo axuliar en CopiarArchivoAServidor, plugins.file.deleteFile " + absoluteFileName,"Aceptar");
		}
	}
	
	return result;
}

/**
 * Abre archivo PDF en explorador segun URL
 * uploadFoder : "/nombreCarpeta"
 * absoluteFileName = "C:\Servoy\desal\developer\nombreArchivo.pdf"
 * absoluteFileName = "nombreArchivo.pdf"
 * 
 * @param {String} uploadFoder
 * @param {String} absoluteFileName
 *
 * @properties={typeid:24,uuid:"3EDE6837-1150-4139-84FB-15E4C67A4457"}
 */
function VisualizarPDF_URL (uploadFoder,absoluteFileName){
	
	var largo_url = application.getServerURL().length;
	if (largo_url < 24){
		
		// Ambiente local desarrollador
		application.showURL('file:///' + absoluteFileName);
	}
	else{
		
		// Ambiente servidor de prueba o operativo
		if(utils.stringTrim(uploadFoder).length > 0){
			
			var fileName = absoluteFileName;
			var absoluteFile = absoluteFileName.split('\\');
			
			if(absoluteFile.length > 1)
				fileName = absoluteFile[absoluteFile.length  - 1];
			
			var url = application.getServerURL().substr(0,23);
			var puerto = url.split(':');
			
			if(puerto[2]!='8080'){
				// Ambiente de pruebas
			}
			else{
				// Ambiente operativo
			}
			
			application.showURL(url + '/uploads' + uploadFoder + '/' + fileName);	
		}
		else{
			
			application.showURL('file:///' + absoluteFileName);
		}
	}
}

