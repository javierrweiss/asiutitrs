/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"7BA6A0C2-0234-454C-9B2B-6FBA96726FC4"}
 */
var AsiUtiTrs_Hoja_apellido = '';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4EDBD3C9-E7EA-421F-A1B9-BD7CCB096646"}
 */
var AsiUtiTrs_Hoja_vPatalogia1 = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"DEA08ABB-A426-4A34-9CA5-EC0469470682",variableType:4}
 */
var AsiUtiTrs_Hoja_grupoTxt = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"C6DFA9C2-0D52-4381-82DB-D6C49CD89C6F",variableType:4}
 */
var AsiUtiTrs_Hoja_lineaTxt = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"CF4D91E0-A274-4AB7-B823-27DE5E870A7C",variableType:4}
 */
var AsiUtiTrs_Hoja_horaTxt = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"9F561828-E7F1-4351-B0A5-99DB0F76E141",variableType:4}
 */
var AsiUtiTrs_Hoja_CantidadHojas=0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"1E40C6DC-0651-43A7-93EB-4D3D5B669535",variableType:4}
 */
var AsiUtiTrs_Hoja_fechaActual = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"1CAB863B-5685-49B0-AA92-3A03FAEBF174",variableType:4}
 */
var AsiUtiTrs_Hoja_fechaTxt = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"6AFB0E69-AB5F-415D-A644-A3EF135D7057",variableType:4}
 */
var AsiUtiTrs_Hoja_ppcTxt = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"366FEDC7-89E8-4559-97FE-9BFED15611EF",variableType:4}
 */
var AsiUtiTrs_Hoja_espCodi = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"3BC42F08-F01A-4C40-A32C-9FF9EE6FE595",variableType:4}
 */
var AsiUtiTrs_Hoja_wEquipo = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A36E0ACC-F572-44BA-8432-2301B4362192",variableType:4}
 */
var AsiUtiTrs_Hoja_nroHabi = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"CB810F8C-0756-4A98-81E1-8745FFF0766E",variableType:4}
 */
var AsiUtiTrs_Hoja_codAutoHist = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"B95EAEB0-BF8F-4FFE-8DDE-A6DBDA2874D3",variableType:4}
 */
var AsiUtiTrs_Hoja_camHabita = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"A91846EC-FE2F-4B07-A736-96885D7919AB"}
 */
var AsiUtiTrs_Hoja_camCama = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"25138A48-57A1-4817-AFEF-F65C2636EBC2",variableType:4}
 */
var AsiUtiTrs_Hoja_servCodigo = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"7C9D9864-C6B4-41F4-9F67-83DA20F70B60",variableType:4}
 */
var AsiUtiTrs_Hoja_ipedPedido = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"16037E90-4DAB-48B8-9C35-C8A54AF4446B",variableType:4}
 */
var AsiUtiTrs_Hoja_ipedServicio = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"1C412AA9-0168-4E51-95AB-B394BA44A6F6",variableType:4}
 */
var AsiUtiTrs_Hoja_horaHciint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"ED075F7D-70B1-4432-A58B-B329A477015A",variableType:4}
 */
var AsiUtiTrs_Hoja_fechaHciint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"F9C75487-FACC-4D3B-93E5-75EC6383715D",variableType:4}
 */
var AsiUtiTrs_Hoja_vEspeMed = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"812BFFDD-2142-44EB-B4CB-3D29B7638647"}
 */
var AsiUtiTrs_Hoja_vPassOperador = '';


/**
 * @properties={typeid:35,uuid:"615FCFED-1F06-4CF8-B10E-B8822317708C",variableType:-4}
 */
var AsiUtiTrs_Hoja_permiso_especial = false;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"C6A4E24F-5C1F-407B-A198-5BFF4AEAB168",variableType:4}
 */
var AsiUtiTrs_Hoja_vTipoTecnico = 0;


/**
 * @properties={typeid:35,uuid:"23F319B4-D797-47E4-AB9C-835D6C7312F0",variableType:-4}
 */
var AsiUtiTrs_Hoja_esAnestesista = false;


/**
 * @properties={typeid:35,uuid:"D57E722D-5684-438E-B442-AC4BD916BB3C",variableType:-4}
 */
var AsiUtiTrs_Hoja_vSolomedicos = true;

/**
 * @properties={typeid:35,uuid:"40B3FBBD-AB29-4706-9632-FFFC7DC05FFF",variableType:-4}
 */
var AsiUtiTrs_Hoja_permisos = new Array();

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"91EC1C10-2075-4719-A4B8-66B25ED3084E",variableType:4}
 */
var AsiUtiTrs_Hoja_alerHistClinPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"FEC2B797-D7DF-4BF7-B359-7ED1C9F38BF5",variableType:4}
 */
var AsiUtiTrs_Hoja_patCodiPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"91CEE5DF-BDA0-458E-B935-29CA4ADEF652",variableType:4}
 */
var AsiUtiTrs_Hoja_horaIngresoPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"1CB0D6CC-98BA-4E5A-A4F3-684E836DF756",variableType:4}
 */
var AsiUtiTrs_Hoja_fechaIngresoPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"E796A914-9CCD-4420-8290-C3CFE7A50266",variableType:4}
 */
var AsiUtiTrs_Hoja_hcUnicaPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"BF72F159-040A-4918-B093-A337BF0955F3",variableType:4}
 */
var AsiUtiTrs_Hoja_perLegajoPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"531C8F91-A9BE-498E-B9CC-21D5BEBAE93D",variableType:4}
 */
var AsiUtiTrs_Hoja_medCodigoPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"E107929C-9985-48B8-A61E-9BCC2A097A74",variableType:4}
 */
var AsiUtiTrs_Hoja_histClinAsist = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"E2A51B90-67BD-4605-98A6-1C3DB1B14FF9",variableType:4}
 */
var AsiUtiTrs_Hoja_horaPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"C98C1D9F-3C2E-46CB-9CA0-F2757AB5281A",variableType:4}
 */
var AsiUtiTrs_Hoja_fechaPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"C717ACCB-4E60-405E-80DF-D1E12BBD6311",variableType:4}
 */
var AsiUtiTrs_Hoja_histClinPrint = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"89E4D9D5-B541-478E-BF18-F67972CC1DF5",variableType:4}
 */
var AsiUtiTrs_Hoja_itemTxt = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"44301E93-80FA-468C-BBB0-E52B2CE24616"}
 */
var AsiUtiTrs_Hoja_patDataProvider = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"CDDC83CC-DE28-4827-AA1A-819C717AEF3A",variableType:4}
 */
var AsiUtiTrs_Hoja_obrCodigo = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"0B76A3EA-B228-4D15-91E2-08A4EB9359B1",variableType:4}
 */
var AsiUtiTrs_Hoja_hiiHisCli = 0;


/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A671DAE3-4807-4611-9A3C-DA0BC103F2E9",variableType:4}
 */
var AsiUtiTrs_Hoja_ImpresoSi = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"434377CD-3DF2-478F-9CF2-6E01D81AD21A",variableType:4}
 */
var AsiUtiTrs_Hoja_Estado_Aislamiento=0;
/**
 * @properties={typeid:35,uuid:"D8C7C126-6C12-4707-BA37-D7A15C4A88DC",variableType:-4}
 */
var AsiUtiTrs_Hoja_soloLectura=true;

/**
 * @properties={typeid:35,uuid:"FAD649DB-8B8E-4421-AE57-4FD4CDE3D233",variableType:-4}
 */
var AsiUtiTrs_Hoja_soloLecturaExamenFisico = true;

/**
 * @properties={typeid:35,uuid:"4FC4AE5B-5C17-4157-851B-F96B2A5A8854",variableType:-4}
 */
var AsiUtiTrs_Hoja_examen_fisicio_habilitado = false;

/**
 * @properties={typeid:35,uuid:"3D1C708A-532A-48A3-A6EE-1686BD938ED5",variableType:-4}
 */
var AsiUtiTrs_Nueva_Evol_Medica = false;
/**
 * @properties={typeid:35,uuid:"2AF79F18-0E86-4BD5-AACB-89D26CDD6109",variableType:-4}
 */
var AsiUtiTrs_Hoja_recursoObtenido = false;
/**
 * @properties={typeid:35,uuid:"42192B5D-5354-4390-93F7-19C8B73EADD5",variableType:-4}
 */
var AsiUtiTrs_Hoja_ultimaHisCli=false;


/**
 * @properties={typeid:35,uuid:"0AC9B8D6-5741-4C29-BD05-3A687E79190D",variableType:-4}
 */
var AsiUtiTrs_Primera_Evol_Medica_Dia=false;
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"5BC52CAC-EB63-42B4-A6F4-8918C4CC0D6C"}
 */
var AsiUtiTrs_Hoja_fechaHisclin='';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"74562B3B-4EBE-4CB7-BE68-A691FDC03577",variableType:4}
 */
var AsiUtiTrs_Hoja_hisclin = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"DA21E38E-E5E4-4165-AC24-92E3C0B3AD67",variableType:4}
 */
var AsiUtiTrs_Hoja_sinFechaEgreso = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A39D75BE-4085-4910-B0DC-A5F9AD446FD1",variableType:4}
 */
var AsiUtiTrs_Hoja_eventSourceButton = 0;

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"1EFFC7A6-1B21-4466-BE22-B1DC6CF22E18"}
 */
var AsiUtiTrs_Hoja_hisclistrynro = '';

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"43C4E24C-8275-4A72-8E27-F8C3DA01CE4E",variableType:4}
 */
var AsiUtiTrs_Hoja_estado_mental = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"160A01FA-03EA-4C7C-8BAB-C768A77B1755",variableType:4}
 */
var AsiUtiTrs_Hoja_Incontinencia= 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"82CC4882-2186-4EEA-894A-0EBFF2019B50",variableType:4}
 */
var AsiUtiTrs_Hoja_actividad = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"64994F0B-2A0D-4850-B8EE-49322E213DE0",variableType:4}
 */
var AsiUtiTrs_Hoja_movilidad = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"581153A1-7393-4625-862C-5F70CB298F9E",variableType:4}
 */
var AsiUtiTrs_Hoja_nutricion = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"B3343AB0-9553-4B1D-B1F0-F856F3208084",variableType:4}
 */
var AsiUtiTrs_Hoja_aspecto_piel = 0;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"B011F712-6A29-4691-B6C0-1ACC5858578B",variableType:4}
 */
var AsiUtiTrs_Hoja_sensibilidad_cutanea = 0;



/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"6E24C4DE-F66C-4617-9F6A-F87FBAD053AC"}
 */
var AsiUtiTrs_Hoja_ViaEndCetral_Lugar=' ';

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"8B6ECE14-CD61-44C0-AF67-F1519ACEF62A"}
 */
var AsiUtiTrs_Hoja_Cateter_Cook_Lugar=' ';


/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"56490E16-BED8-4AB3-B876-D60B89346112"}
 */
var AsiUtiTrs_Hoja_SondaVesical_Obs=' '

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"E182694E-A714-4E1D-886C-4B66B445A53D"}
 */
var AsiUtiTrs_Hoja_SondaNG_Obs=' '

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"18A5229C-547F-4B2E-966E-562603994003"}
 */
var AsiUtiTrs_Hoja_SondaSog_Obs=' '

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"028718D0-3BEA-4A64-8DE0-1945B3A5AF79"}
 */
var AsiUtiTrs_Hoja_SondaOtras_Obs=' '

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"099FDD54-68EA-437A-9ECE-2C173F21C709"}
 */
var AsiUtiTrs_Hoja_Escaras_Obs=' '
	

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"5A536F58-B1D8-4B1F-8BEF-0A603E149171"}
 */
var AsiUtiTrs_diagnostico_aislamiento='';

/**
 * @properties={typeid:35,uuid:"E08038E9-4A47-4171-926F-AAA42B5FDDF7",variableType:-4}
 */
var confirmaFactores=false;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"9C7ECB5A-37EA-44B4-A6EF-7EF217C2D541",variableType:4}
 */
var AsiUtiTrs_es_primer_evol = 1;

/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"D4359256-696A-4796-854F-98A56CFA5915",variableType:4}
 */
var AsiUtiTrs_es_primer_evol_dia=1;
/**
 * @properties={typeid:35,uuid:"4AC7666B-633F-4D85-B474-20A97BA8C2EA",variableType:-4}
 */
var ModoLecturaVisualizarFactoresYvaloracion=false;
/**
 * @properties={typeid:24,uuid:"6EB775FB-8F26-4596-A78E-9EFFF607A064"}
 */
function onSolutionOpen_AsiUtiTrs() {
	
}

/**
 * TODO generated, please specify type and doc for the params
 * @param args
 *
 * @properties={typeid:24,uuid:"65EF42CC-DEA0-48D4-834B-4729A1FC85E1"}
 */
function llamada_desde_Menu(args) {
	
	plugins.window.getMenuBar().setVisible(false)
    plugins.window.setToolBarAreaVisible(false)
    
    if(application.getApplicationType()==APPLICATION_TYPES.SMART_CLIENT){
    	var names1 = plugins.window.getToolbarNames();
    	for (var i = 0 ; i < names1.length ; i++) {
        	 plugins.window.removeToolBar(names1[i])
    	}  
    }  
    plugins.window.setFullScreen(false)
    plugins.window.getMenuBar().setVisible(false)
    plugins.window.setToolBarAreaVisible(false)
	plugins.window.setStatusBarVisible(false);
    //VERIFICAR
    //databaseManager.addTableFilterParam("admisionscroll","tbc_admision_scroll","adm_fecaltaefec","=",0);
    databaseManager.setAutoSave(false)
    
	// Trae datos desde el Menu
	args = args.toString()
	args=args.split(';') 
	globals.vLegajo=utils.stringToNumber(args[0])
	globals.vLega=utils.stringToNumber(args[1])
	globals.vOperador=args[2]
	globals.vTipoOperador=utils.stringToNumber(args[3])
	globals.gbl_transacciones_1= 0 //args[4] 
	globals.vEmpresa=args[5]
	globals.gbl_expanding_Nodes=args[6]
	globals.gbl_title= 'Evolución Medica - Servicio Terapia Intensiva'
	forms.frm_menu.elements.frm_main.dividerLocation = 0.20	// divide ventana
	application.updateUI()
	
	globals.loginSolution();
	//scopes.globals.Srv_Login_Sanatorio_vLega = Srv_Login_Sanatorio_vLega;
	
	// VERIFICAR
	/*if(['Computos_Admin','DireccionMedica_Director'].indexOf(globals.AsiUtiTrs_Hoja_permisos.getValue(1,1))!=-1){
		globals.AsiUtiTrs_Hoja_permiso_especial=true;
	}*/
	forms.frm_menu.Armar_item();
	
	if(globals.Srv_Login_Sanatorio_esAnestesista && globals.Srv_Login_Sanatorio_vSolomedicos ){}
	else{return}
	
	//Muestra Formulario Principal
	var winIngreso = application.createWindow("Menu_item",JSWindow.MODAL_DIALOG)	
    winIngreso.title= globals.gbl_title
    winIngreso.resizable = false	
    winIngreso.show(forms.HciutiTrs_frm_evo_medica_utiTrs_hoja_TI)	
	
}

/**
 * TODO generated, please specify type and doc for the params
 * @param {String} realValue
 *
 * @properties={typeid:24,uuid:"071E4897-19FB-4FCB-8BD9-AF878C41FD22"}
 */
function AsiUtiTrs_Hoja_convertNumberToHour_HHMM(realValue) {
	
	var hora = "";
	if(realValue != null){
		var value = Number(realValue);
		if(value < 1){
			hora = "00:00";
		}
		else{
			if(value < 10){
				hora = "00:0" + value.toString().substr(0,1);
			}
			else{
				if(value < 100){
					hora = "00:" + value.toString().substr(0,2);
				}
				else{
					if(value < 1000){
						hora = "0" + value.toString().substr(0,1) + ":" + value.toString().substr(1,2);
					}
					else{
						if(value <= 2359){
							hora = value.toString().substr(0,2) + ":" + value.toString().substr(2,2);
						}
					}
				}
			}
		}
	}
	
	return hora;
}

/**
 * @properties={typeid:24,uuid:"293F3DD0-5EB4-4811-97F6-3E4FE2A8B213"}
 */
function formatearHistclin() {
	var histClin = '';
	if(arguments[0] != undefined)
		histClin =  arguments[0].toString().substr(0,arguments[0].toString().length-1)+"/"+arguments[0].toString().substr(arguments[0].toString().length -1,1)	

	return histClin;
}

/**
 * @properties={typeid:24,uuid:"EF89CAEF-73A8-469F-A994-82C57B8B0BEF"}
 */
function AsiUtiTrs_Hoja_calculaDigitoVerificador() {
	var aux_dig = new Array(5);
	if(globals.Srv_Login_Sanatorio_vlargo==2){
		aux_dig[0] = 0
		aux_dig[1] = 0
		aux_dig[2] = 0
		aux_dig[3] = globals.Srv_Login_Sanatorio_vLega.toString().substr(0,1);
		aux_dig[4] = globals.Srv_Login_Sanatorio_vLega.toString().substr(1,1);
	}else{
		if (globals.Srv_Login_Sanatorio_vlargo==3){
			aux_dig[0] = 0
			aux_dig[1] = 0
			aux_dig[2] = globals.Srv_Login_Sanatorio_vLega.toString().substr(0,1);
			aux_dig[3] = globals.Srv_Login_Sanatorio_vLega.toString().substr(1,1);
			aux_dig[4] = globals.Srv_Login_Sanatorio_vLega.toString().substr(2,1);
		}else{
			if(globals.Srv_Login_Sanatorio_vlargo==4){
				aux_dig[0] = 0
				aux_dig[1] = globals.Srv_Login_Sanatorio_vLega.toString().substr(0,1);
				aux_dig[2] = globals.Srv_Login_Sanatorio_vLega.toString().substr(1,1);
				aux_dig[3] = globals.Srv_Login_Sanatorio_vLega.toString().substr(2,1);
				aux_dig[4] = globals.Srv_Login_Sanatorio_vLega.toString().substr(3,1);
			}else{
				if(globals.Srv_Login_Sanatorio_vlargo==5){
					aux_dig[0] = globals.Srv_Login_Sanatorio_vLega.toString().substr(0,1);
					aux_dig[1] = globals.Srv_Login_Sanatorio_vLega.toString().substr(1,1);
					aux_dig[2] = globals.Srv_Login_Sanatorio_vLega.toString().substr(2,1);
					aux_dig[3] = globals.Srv_Login_Sanatorio_vLega.toString().substr(3,1);
					aux_dig[4] = globals.Srv_Login_Sanatorio_vLega.toString().substr(4,1);
				}
			}
		}
	}
	var verificador = 0;
	verificador = utils.stringToNumber(aux_dig[1]) + utils.stringToNumber(aux_dig[2]) * 3 + utils.stringToNumber(aux_dig[3]) * 9 + utils.stringToNumber(aux_dig[4]) * 7;
	var larg = verificador.toString().length - 1;
	if(globals.Srv_Login_Sanatorio_digito_verificador!=verificador.toString().substr(larg,1)){
		globals.Srv_Login_Sanatorio_vDigVerif=false
	}

}

/**
 * Called for performing a conversion between a database value and a displayed value.
 *
 * @param databaseValue The database value.
 * @param {String} dbType The type of the database column. Can be one of "TEXT", "INTEGER", "NUMBER", "DATETIME" or "MEDIA".
 *
 * @returns {Object} the displayed value.
 *
 * @properties={typeid:24,uuid:"6ED1AC85-611D-4C70-AD9C-FF46D958A770"}
 */
function AsiUtiTrs_Hoja_convertNumberToDate(databaseValue, dbType) {
	
	var fecha = "";
	 
	if(databaseValue > 0){
		
		var fechaAux = String(databaseValue);
		fecha = fechaAux.substr(6,2) + '/' + fechaAux.substr(4,2) + '/' + fechaAux.substr(0,4); 
	}
		 
	return fecha;
}

/**
 * Callback method for when solution is closed, force boolean argument tells if this is a force (not stopable) close or not.
 *
 * @param {Boolean} force if false then solution close can be stopped by returning false
 *
 * @returns {Boolean}
 *
 * @properties={typeid:24,uuid:"71800C18-8D78-429F-9AE2-F194AC32C1B6"}
 */
function onCloseSolution(force) {
//	plugins.Log.debugLevel = 'INFO';
//	plugins.Log.logFilePath = 'C:\\bloqueos.log';
//	plugins.Log.outputPattern = '%s %p %d{HH:mm:ss.S}: %m%n';
//	plugins.Log.info('CloseSolution: '+application.getSolutionName()+ 'hisClin:' + AsiUtiTrs_Hoja_numero_to_tbc_admision.adm_histclin.toString()+','+globals.Srv_Login_Sanatorio_vLega.toString()+','+ "Historia Clinica" + "IP: "+application.getIPAddress() );
	
}

/**
 * Handle changed data.
 *
 * @param {String} oldValue old value
 * @param {String} newValue new value
 * @param {JSEvent} event the event that triggered the action
 *
 * @returns {Boolean}
 *
 * @properties={typeid:24,uuid:"C33CA401-B762-418D-9BF7-AF3DA3D81FDC"}
 */
function onDataChangeField(oldValue, newValue, event) {
	// TODO Auto-generated method stub
	forms.HciutiTrs_frm_evo_medica_utiTrs_hoja_TI.$isDirty = true;
	return true
}

/**
 * Callback method for when an error occurred (the error can be a JavaScript or Servoy Java error).
 *
 * @param {*} ex exception to handle
 *
 * @returns {Boolean}
 *
 * @properties={typeid:24,uuid:"381ED672-8FEE-4C26-BE3D-B7F49581BE46"}
 */
function onError(ex) {
	 if (ex instanceof ServoyException)
	  {
	    switch (ex.getErrorCode())
	    {
	      case ServoyException.SAVE_FAILED:
	      case ServoyException.INVALID_INPUT:
	    	  plugins.dialogs.showErrorDialog("Valor no valido",'Este campo no puede ser vacio');
	        //forms.graphics_template_dialog.setup_dialog(null, 'Error Handler', 'It seems you did not fill in a required field', 'Ok'); 
	        return ;
	      default:
	        return;
	    }   
	  }
	 return true;
}

/**
 * TODO generated, please specify type and doc for the params
 * @param solucion
 * @param formulario
 * @param id
 * @param legajo
 * @param tituloError
 *
 * @properties={typeid:24,uuid:"FAB41BBF-8A17-4F0D-9414-9307FCF23D5D"}
 */
function isLock(solucion,formulario,id,legajo,tituloError){

	var bloqueado = true;
	var serverName = "desal";
	var tableName = "asi_bloqueos";
	var sql = "select * from " + tableName + " where solucion = '" + solucion + "' and formulario = '" + formulario + "' and identificador = '" + id +"'";
	var vDataset = databaseManager.getDataSetByQuery(serverName, sql, null, 1);
	if (vDataset.getMaxRowIndex()>0){
	
				if(vDataset.getValue(1,5)){
					bloqueado = true;
				}
				else{
					bloqueado = false;
				}
	}
	return bloqueado;

}


